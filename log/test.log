  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 764040363)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 741323130)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 764040363)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 741323130)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 764040363)
  [1m[36mFixture Insert (1.9ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 741323130)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 764040363)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 741323130)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 764040363)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 741323130)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 764040363)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 741323130)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 764040363)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 741323130)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 764040363)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 741323130)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 764040363)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 741323130)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 764040363)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 741323130)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 764040363)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 741323130)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 764040363)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 741323130)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 764040363)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 741323130)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 764040363)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 741323130)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 764040363)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 741323130)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 764040363)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 741323130)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 764040363)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 741323130)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 764040363)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 741323130)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 764040363)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 741323130)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 764040363)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 741323130)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 764040363)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 741323130)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (5.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 764040363)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 741323130)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 764040363)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 741323130)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 764040363)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 741323130)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 764040363)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:12:13', '2017-02-18 15:12:13', 741323130)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 922721480)
  [1m[36mFixture Insert (1.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 141249418)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 922721480)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 141249418)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 922721480)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 141249418)[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 922721480)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 141249418)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 922721480)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 141249418)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 922721480)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 141249418)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 141249418)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 922721480)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 141249418)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 922721480)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 141249418)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 922721480)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 141249418)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 141249418)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 922721480)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 141249418)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (3.2ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 922721480)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 141249418)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 922721480)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 141249418)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 141249418)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 922721480)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 141249418)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 141249418)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.5ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 922721480)[0m
  [1m[35mFixture Insert (1.7ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 141249418)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 141249418)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 922721480)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 141249418)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 922721480)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 141249418)[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 922721480)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 141249418)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 141249418)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 922721480)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 141249418)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', 'password', '2017-02-18 15:13:43', '2017-02-18 15:13:43', 141249418)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 922721480)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 141249418)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 922721480)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 141249418)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 922721480)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 141249418)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 922721480)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 141249418)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 141249418)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 922721480)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 141249418)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 922721480)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 141249418)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 922721480)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 141249418)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 141249418)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 922721480)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 141249418)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 922721480)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 141249418)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 922721480)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 141249418)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 922721480)
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 141249418)[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 922721480)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 141249418)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 141249418)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.5ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 922721480)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 141249418)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 141249418)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 922721480)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 141249418)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 922721480)
  [1m[36mFixture Insert (1.7ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 141249418)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 922721480)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 141249418)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 141249418)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 922721480)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 141249418)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 141249418)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 922721480)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 141249418)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:20:31', '2017-02-18 15:20:31', 141249418)[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 897132501)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 922721480)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 897132501)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 897132501)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 922721480)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 897132501)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (3.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 897132501)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 922721480)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 897132501)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 897132501)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 922721480)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 897132501)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 922721480)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 897132501)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 922721480)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 897132501)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 897132501)[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (3.2ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 922721480)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 897132501)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 922721480)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 897132501)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 922721480)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 897132501)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 897132501)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 922721480)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 897132501)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 897132501)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 922721480)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 897132501)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 897132501)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 922721480)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 897132501)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 897132501)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 922721480)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 897132501)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 897132501)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 922721480)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 897132501)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:21:04', '2017-02-18 15:21:04', 897132501)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (1.5ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 897132501)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 922721480)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 897132501)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 922721480)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 897132501)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 922721480)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 897132501)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 922721480)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 897132501)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 922721480)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 897132501)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 922721480)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 897132501)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 922721480)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 897132501)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 897132501)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 922721480)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 897132501)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 897132501)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 922721480)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 897132501)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 897132501)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 922721480)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 897132501)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 922721480)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 897132501)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 922721480)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 897132501)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 897132501)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 922721480)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 897132501)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 897132501)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 922721480)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 897132501)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 897132501)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 922721480)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 897132501)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 897132501)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 922721480)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 897132501)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:24:07', '2017-02-18 15:24:07', 897132501)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:27', '2017-02-18 15:25:27', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:27', '2017-02-18 15:25:27', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:27', '2017-02-18 15:25:27', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:27', '2017-02-18 15:25:27', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', NULL, NULL, '2017-02-18 15:25:27', '2017-02-18 15:25:27', 980190962)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:27', '2017-02-18 15:25:27', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:27', '2017-02-18 15:25:27', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "assignments"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:27', '2017-02-18 15:25:27', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:27', '2017-02-18 15:25:27', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "lessons"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', NULL, NULL, '2017-02-18 15:25:27', '2017-02-18 15:25:27', 980190962)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:27', '2017-02-18 15:25:27', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:27', '2017-02-18 15:25:27', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:27', '2017-02-18 15:25:27', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:27', '2017-02-18 15:25:27', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', NULL, NULL, '2017-02-18 15:25:27', '2017-02-18 15:25:27', 980190962)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:27', '2017-02-18 15:25:27', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:27', '2017-02-18 15:25:27', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "assignments"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:27', '2017-02-18 15:25:27', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:27', '2017-02-18 15:25:27', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "lessons"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', NULL, NULL, '2017-02-18 15:25:27', '2017-02-18 15:25:27', 980190962)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:28', '2017-02-18 15:25:28', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)[0m
  [1m[35m (1.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:28', '2017-02-18 15:25:28', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "assignments"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "lessons"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (3.9ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:28', '2017-02-18 15:25:28', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.8ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:28', '2017-02-18 15:25:28', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "assignments"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "lessons"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:28', '2017-02-18 15:25:28', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:28', '2017-02-18 15:25:28', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "assignments"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "lessons"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:28', '2017-02-18 15:25:28', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:28', '2017-02-18 15:25:28', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "assignments"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "lessons"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:28', '2017-02-18 15:25:28', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:28', '2017-02-18 15:25:28', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "assignments"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "lessons"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:28', '2017-02-18 15:25:28', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (1.6ms)[0m  DELETE FROM "users"
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:28', '2017-02-18 15:25:28', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "assignments"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "lessons"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:28', '2017-02-18 15:25:28', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:28', '2017-02-18 15:25:28', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "assignments"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "lessons"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:28', '2017-02-18 15:25:28', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:28', '2017-02-18 15:25:28', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "assignments"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "lessons"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:28', '2017-02-18 15:25:28', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:28', '2017-02-18 15:25:28', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "assignments"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "lessons"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:28', '2017-02-18 15:25:28', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 298486374)[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:28', '2017-02-18 15:25:28', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "assignments"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "lessons"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (2.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:25:28', '2017-02-18 15:25:28', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', NULL, NULL, '2017-02-18 15:25:28', '2017-02-18 15:25:28', 980190962)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "assignments"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "lessons"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "subjects"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "assignments"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "lessons"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "subjects"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "assignments"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "lessons"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "subjects"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "assignments"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "lessons"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "subjects"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "assignments"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "lessons"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "subjects"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "assignments"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "lessons"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "subjects"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "assignments"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "lessons"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)[0m
  [1m[35mFixture Delete (9.6ms)[0m  DELETE FROM "subjects"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "assignments"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "lessons"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 15:27:31', '2017-02-18 15:27:31', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "subjects"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:32', '2017-02-18 15:27:32', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:32', '2017-02-18 15:27:32', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:32', '2017-02-18 15:27:32', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:32', '2017-02-18 15:27:32', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 15:27:32', '2017-02-18 15:27:32', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 15:27:32', '2017-02-18 15:27:32', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:32', '2017-02-18 15:27:32', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:32', '2017-02-18 15:27:32', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "assignments"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:32', '2017-02-18 15:27:32', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:32', '2017-02-18 15:27:32', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "lessons"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 15:27:32', '2017-02-18 15:27:32', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 15:27:32', '2017-02-18 15:27:32', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "subjects"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:32', '2017-02-18 15:27:32', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:32', '2017-02-18 15:27:32', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:32', '2017-02-18 15:27:32', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:32', '2017-02-18 15:27:32', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 15:27:32', '2017-02-18 15:27:32', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 15:27:32', '2017-02-18 15:27:32', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:32', '2017-02-18 15:27:32', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:32', '2017-02-18 15:27:32', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "assignments"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:32', '2017-02-18 15:27:32', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:32', '2017-02-18 15:27:32', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "lessons"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 15:27:32', '2017-02-18 15:27:32', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 15:27:32', '2017-02-18 15:27:32', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "subjects"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:32', '2017-02-18 15:27:32', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:32', '2017-02-18 15:27:32', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:32', '2017-02-18 15:27:32', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:32', '2017-02-18 15:27:32', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 15:27:32', '2017-02-18 15:27:32', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 15:27:32', '2017-02-18 15:27:32', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:32', '2017-02-18 15:27:32', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:32', '2017-02-18 15:27:32', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "assignments"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:32', '2017-02-18 15:27:32', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:32', '2017-02-18 15:27:32', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "lessons"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 15:27:32', '2017-02-18 15:27:32', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 15:27:32', '2017-02-18 15:27:32', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "subjects"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:32', '2017-02-18 15:27:32', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:32', '2017-02-18 15:27:32', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:32', '2017-02-18 15:27:32', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:32', '2017-02-18 15:27:32', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 15:27:32', '2017-02-18 15:27:32', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 15:27:32', '2017-02-18 15:27:32', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "roles"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:32', '2017-02-18 15:27:32', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:32', '2017-02-18 15:27:32', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "assignments"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:32', '2017-02-18 15:27:32', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:32', '2017-02-18 15:27:32', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "lessons"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 15:27:32', '2017-02-18 15:27:32', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 15:27:32', '2017-02-18 15:27:32', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "subjects"
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (14.5ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:32', '2017-02-18 15:27:32', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:27:32', '2017-02-18 15:27:32', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:32', '2017-02-18 15:27:32', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:27:32', '2017-02-18 15:27:32', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 15:27:32', '2017-02-18 15:27:32', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 15:27:32', '2017-02-18 15:27:32', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:28:17', '2017-02-18 15:28:17', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:28:17', '2017-02-18 15:28:17', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:28:17', '2017-02-18 15:28:17', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:28:17', '2017-02-18 15:28:17', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 15:28:17', '2017-02-18 15:28:17', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 15:28:17', '2017-02-18 15:28:17', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 15:28:17', '2017-02-18 15:28:17', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 15:28:17', '2017-02-18 15:28:17', 298486374)[0m
  [1m[35m (2.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
Processing by LessonsController#edit as HTML
  [1m[35mLesson Load (0.2ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = ? LIMIT 1  [["id", nil]]
Completed 404 Not Found in 10ms (ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
Processing by LessonsController#show as HTML
  [1m[36mLesson Load (0.1ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = ? LIMIT 1[0m  [["id", nil]]
Completed 404 Not Found in 1ms (ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
Processing by LessonsController#index as HTML
  Rendered lessons/index.html.erb within layouts/application (0.9ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Completed 200 OK in 277ms (Views: 276.2ms | ActiveRecord: 0.2ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
Processing by LessonsController#new as HTML
  Rendered lessons/new.html.erb within layouts/application (0.3ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 57ms (Views: 2.9ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://test.host/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-18 15:28:18 +0000
Processing by SessionsController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
  Rendered sessions/new.html.erb within layouts/application (12.6ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Completed 200 OK in 26ms (Views: 16.9ms | ActiveRecord: 0.1ms)
Started POST "/login" for 127.0.0.1 at 2017-02-18 15:28:18 +0000
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"email"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
Processing by SubjectsController#index as HTML
  [1m[36mSubject Load (0.1ms)[0m  [1mSELECT "subjects".* FROM "subjects"[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 22]]
  Rendered subjects/index.html.erb within layouts/application (5.8ms)
Completed 500 Internal Server Error in 10ms (ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
Processing by SubjectsController#new as HTML
  Rendered subjects/new.html.erb within layouts/application (12.6ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 15ms (Views: 14.9ms | ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$Bd0by2qDPM9AdI5SnD2QHODDJDZWJ1T1bOqKD/WOTRMtprYHG9Sn2"], ["created_at", "2017-02-18 15:28:18.317310"], ["updated_at", "2017-02-18 15:28:18.317310"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$MB2D97GrvfRlyI5UcH5HPOiXQwMB3S2rMnWpKPELAO3KncFa3Xfki"], ["created_at", "2017-02-18 15:28:18.375043"], ["updated_at", "2017-02-18 15:28:18.375043"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$1vV5tk.BAT0scS5PKLCuv.v1dhZBTjrULYbx.6qYEyHIvwFfziMH2"], ["created_at", "2017-02-18 15:28:18.421275"], ["updated_at", "2017-02-18 15:28:18.421275"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 15:28:18 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 15:28:18 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 15:28:18 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 15:28:18 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integration_test", "name"=>"Integration Test", "email"=>"integration@test.co.uk", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:29:13', '2017-02-18 15:29:13', 922721480)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:29:13', '2017-02-18 15:29:13', 897132501)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:29:13', '2017-02-18 15:29:13', 922721480)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:29:13', '2017-02-18 15:29:13', 897132501)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:29:13', '2017-02-18 15:29:13', 922721480)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:29:13', '2017-02-18 15:29:13', 897132501)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:29:14', '2017-02-18 15:29:14', 922721480)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:29:14', '2017-02-18 15:29:14', 897132501)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (2.7ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:29:14', '2017-02-18 15:29:14', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:29:14', '2017-02-18 15:29:14', 897132501)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:29:14', '2017-02-18 15:29:14', 922721480)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:29:14', '2017-02-18 15:29:14', 897132501)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:29:14', '2017-02-18 15:29:14', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:29:14', '2017-02-18 15:29:14', 897132501)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:29:14', '2017-02-18 15:29:14', 922721480)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:29:14', '2017-02-18 15:29:14', 897132501)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:29:14', '2017-02-18 15:29:14', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:29:14', '2017-02-18 15:29:14', 897132501)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:29:14', '2017-02-18 15:29:14', 922721480)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:29:14', '2017-02-18 15:29:14', 897132501)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:29:14', '2017-02-18 15:29:14', 922721480)
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:29:14', '2017-02-18 15:29:14', 897132501)[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:29:14', '2017-02-18 15:29:14', 922721480)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:29:14', '2017-02-18 15:29:14', 897132501)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:29:14', '2017-02-18 15:29:14', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:29:14', '2017-02-18 15:29:14', 897132501)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:29:14', '2017-02-18 15:29:14', 922721480)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:29:14', '2017-02-18 15:29:14', 897132501)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:29:14', '2017-02-18 15:29:14', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:29:14', '2017-02-18 15:29:14', 897132501)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:29:14', '2017-02-18 15:29:14', 922721480)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:29:14', '2017-02-18 15:29:14', 897132501)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:29:14', '2017-02-18 15:29:14', 922721480)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:29:14', '2017-02-18 15:29:14', 897132501)[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:29:14', '2017-02-18 15:29:14', 922721480)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:29:14', '2017-02-18 15:29:14', 897132501)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:29:14', '2017-02-18 15:29:14', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:29:14', '2017-02-18 15:29:14', 897132501)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:29:14', '2017-02-18 15:29:14', 922721480)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:29:14', '2017-02-18 15:29:14', 897132501)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:29:14', '2017-02-18 15:29:14', 922721480)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:29:14', '2017-02-18 15:29:14', 897132501)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:29:14', '2017-02-18 15:29:14', 922721480)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:29:14', '2017-02-18 15:29:14', 897132501)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:29:14', '2017-02-18 15:29:14', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:29:14', '2017-02-18 15:29:14', 897132501)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:29:14', '2017-02-18 15:29:14', 922721480)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:29:14', '2017-02-18 15:29:14', 897132501)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:29:14', '2017-02-18 15:29:14', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:29:14', '2017-02-18 15:29:14', 897132501)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 298486374)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 298486374)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 298486374)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 298486374)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 298486374)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 298486374)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (3.3ms)[0m  begin transaction
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 298486374)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 298486374)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 298486374)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 298486374)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 298486374)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 298486374)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 298486374)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 298486374)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 298486374)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 298486374)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 298486374)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 298486374)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 298486374)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 298486374)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 298486374)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 298486374)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 298486374)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 298486374)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:30:11', '2017-02-18 15:30:11', 298486374)[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:30:31', '2017-02-18 15:30:31', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:30:31', '2017-02-18 15:30:31', 897132501)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-18 15:30:31', '2017-02-18 15:30:31', 995863769)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-18 15:30:31', '2017-02-18 15:30:31', 377866774)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:30:31', '2017-02-18 15:30:31', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:30:31', '2017-02-18 15:30:31', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:30:31', '2017-02-18 15:30:31', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:30:31', '2017-02-18 15:30:31', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 15:30:31', '2017-02-18 15:30:31', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 15:30:31', '2017-02-18 15:30:31', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 15:30:31', '2017-02-18 15:30:31', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 15:30:31', '2017-02-18 15:30:31', 298486374)[0m
  [1m[35m (2.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$vVN9k0UMnoNSQdXNpXU4VesYzccnCQom6B/qGBJpq6XmYmfr3GzOa"], ["created_at", "2017-02-18 15:30:31.162925"], ["updated_at", "2017-02-18 15:30:31.162925"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$GcrmG3a5CHfx8Zkfn8pMP.EAoGEWZI8YDsJ/cWeYPbeUzvsUGWyCu"], ["created_at", "2017-02-18 15:30:31.191188"], ["updated_at", "2017-02-18 15:30:31.191188"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$iHRSGES5Rm.tfZKUK2XVGeEucbnHYTz94T3sZ5U5vC79VDH0EeQES"], ["created_at", "2017-02-18 15:30:31.220234"], ["updated_at", "2017-02-18 15:30:31.220234"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-18 15:30:31 +0000
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (8.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 193ms (Views: 168.4ms | ActiveRecord: 0.2ms)
Started POST "/login" for 127.0.0.1 at 2017-02-18 15:30:31 +0000
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"email"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
Processing by SubjectsController#index as HTML
  [1m[35mSubject Load (0.1ms)[0m  SELECT "subjects".* FROM "subjects"
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 22]]
  Rendered subjects/index.html.erb within layouts/application (6.1ms)
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
Processing by SubjectsController#new as HTML
  Rendered subjects/new.html.erb within layouts/application (2.0ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Completed 200 OK in 4ms (Views: 3.8ms | ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
Processing by UsersController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Redirected to http://test.host/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
Processing by LessonsController#new as HTML
  Rendered lessons/new.html.erb within layouts/application (0.3ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Completed 200 OK in 9ms (Views: 5.9ms | ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
Processing by LessonsController#index as HTML
  Rendered lessons/index.html.erb within layouts/application (0.3ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 2ms (Views: 2.1ms | ActiveRecord: 0.1ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
Processing by LessonsController#show as HTML
  [1m[35mLesson Load (0.1ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = ? LIMIT 1  [["id", nil]]
Completed 404 Not Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
Processing by LessonsController#edit as HTML
  [1m[36mLesson Load (0.0ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = ? LIMIT 1[0m  [["id", nil]]
Completed 404 Not Found in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 15:30:31 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 15:30:31 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 15:30:31 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 15:30:31 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integration_test", "name"=>"Integration Test", "email"=>"integration@test.co.uk", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 15:31:11', '2017-02-18 15:31:11', 922721480)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 15:31:11', '2017-02-18 15:31:11', 141249418)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-18 15:31:11', '2017-02-18 15:31:11', 995863769)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-18 15:31:11', '2017-02-18 15:31:11', 377866774)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:31:11', '2017-02-18 15:31:11', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 15:31:11', '2017-02-18 15:31:11', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:31:11', '2017-02-18 15:31:11', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 15:31:11', '2017-02-18 15:31:11', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 15:31:11', '2017-02-18 15:31:11', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 15:31:11', '2017-02-18 15:31:11', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 15:31:11', '2017-02-18 15:31:11', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 15:31:11', '2017-02-18 15:31:11', 298486374)[0m
  [1m[35m (2.1ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
Processing by LessonsController#edit as HTML
  [1m[35mLesson Load (0.2ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = ? LIMIT 1  [["id", nil]]
Completed 404 Not Found in 10ms (ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
Processing by LessonsController#show as HTML
  [1m[36mLesson Load (0.1ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = ? LIMIT 1[0m  [["id", nil]]
Completed 404 Not Found in 1ms (ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
Processing by LessonsController#new as HTML
  Rendered lessons/new.html.erb within layouts/application (1.0ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Completed 200 OK in 174ms (Views: 168.7ms | ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
Processing by LessonsController#index as HTML
  Rendered lessons/index.html.erb within layouts/application (0.3ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 2ms (Views: 2.0ms | ActiveRecord: 0.1ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 15:31:12 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 8ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 15:31:12 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 15:31:12 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 15:31:12 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integration_test", "name"=>"Integration Test", "email"=>"integration@test.co.uk", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$MerTDnJDHu8N8Dweu6Xty.7A6rPTBPt2Ag2HXG.ECLdScbGRRZzPa"], ["created_at", "2017-02-18 15:31:12.291592"], ["updated_at", "2017-02-18 15:31:12.291592"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$ZMRXf5YJz7RXN7kObajsiOrQArXZcdVuOQarZwH/eQQ4s7boSOame"], ["created_at", "2017-02-18 15:31:12.298932"], ["updated_at", "2017-02-18 15:31:12.298932"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$3rlKRBXOCEQ.Xpbr500pkeuxHFUneKlacpwaR8erw8JckZip4pRlq"], ["created_at", "2017-02-18 15:31:12.303346"], ["updated_at", "2017-02-18 15:31:12.303346"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-18 15:31:12 +0000
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (22.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 29ms (Views: 28.3ms | ActiveRecord: 0.2ms)
Started POST "/login" for 127.0.0.1 at 2017-02-18 15:31:12 +0000
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"email"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
Processing by SubjectsController#index as HTML
  [1m[35mSubject Load (0.2ms)[0m  SELECT "subjects".* FROM "subjects"
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 22]]
  Rendered subjects/index.html.erb within layouts/application (10.3ms)
Completed 500 Internal Server Error in 16ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
Processing by SubjectsController#new as HTML
  Rendered subjects/new.html.erb within layouts/application (2.5ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Completed 200 OK in 8ms (Views: 7.1ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 922721480]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 141249418]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863769]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 377866774]]
Processing by UsersController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Redirected to http://test.host/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 22:41:58', '2017-02-18 22:41:58', 922721480)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 22:41:58', '2017-02-18 22:41:58', 141249418)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-18 22:41:58', '2017-02-18 22:41:58', 995863769)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-18 22:41:58', '2017-02-18 22:41:58', 377866774)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 22:41:58', '2017-02-18 22:41:58', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 22:41:58', '2017-02-18 22:41:58', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 22:41:58', '2017-02-18 22:41:58', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 22:41:58', '2017-02-18 22:41:58', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 22:41:58', '2017-02-18 22:41:58', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 22:41:58', '2017-02-18 22:41:58', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 22:41:58', '2017-02-18 22:41:58', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 22:41:58', '2017-02-18 22:41:58', 298486374)[0m
  [1m[35m (4.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://test.host/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-18 22:41:58 +0000
Processing by SessionsController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
  Rendered sessions/new.html.erb within layouts/application (13.5ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Completed 200 OK in 161ms (Views: 150.9ms | ActiveRecord: 0.2ms)
Started POST "/login" for 127.0.0.1 at 2017-02-18 22:41:59 +0000
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"email"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 22:41:59 +0000
Processing by UsersController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2017-02-18 22:41:59 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 22:41:59 +0000
Processing by UsersController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2017-02-18 22:41:59 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integration_test", "name"=>"Integration Test", "email"=>"integration@test.co.uk", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
Processing by LessonsController#edit as HTML
  [1m[36mLesson Load (0.1ms)[0m  [1mSELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = ? LIMIT 1[0m  [["id", nil]]
Completed 404 Not Found in 2ms (ActiveRecord: 0.1ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
Processing by LessonsController#new as HTML
  Rendered lessons/new.html.erb within layouts/application (0.2ms)
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Completed 200 OK in 8ms (Views: 4.9ms | ActiveRecord: 0.3ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
Processing by LessonsController#index as HTML
  Rendered lessons/index.html.erb within layouts/application (0.2ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 2ms (Views: 1.8ms | ActiveRecord: 0.1ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
Processing by LessonsController#show as HTML
  [1m[35mLesson Load (0.0ms)[0m  SELECT  "lessons".* FROM "lessons" WHERE "lessons"."id" = ? LIMIT 1  [["id", nil]]
Completed 404 Not Found in 0ms (ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$s7duFfy/qNquqnOPd6Guw.NH.hNd11gZ/4TVZen4yz5.GpfGgD5uu"], ["created_at", "2017-02-18 22:41:59.121778"], ["updated_at", "2017-02-18 22:41:59.121778"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$66CkAyWLw5gVcCUWNRkLNekQFLv3X8d9xhxeR1Bq0rJV8zGhslE1a"], ["created_at", "2017-02-18 22:41:59.131234"], ["updated_at", "2017-02-18 22:41:59.131234"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$jE7x2qhR1/ZrojbYokT54edEy3DaOgpeqXsOdsqLGQc18iCQ0DGKC"], ["created_at", "2017-02-18 22:41:59.139233"], ["updated_at", "2017-02-18 22:41:59.139233"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
Processing by SubjectsController#index as HTML
  [1m[36mSubject Load (0.2ms)[0m  [1mSELECT "subjects".* FROM "subjects"[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 22]]
  Rendered subjects/index.html.erb within layouts/application (11.8ms)
Completed 500 Internal Server Error in 28ms (ActiveRecord: 0.3ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
Processing by SubjectsController#new as HTML
  Rendered subjects/new.html.erb within layouts/application (2.1ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 20ms (Views: 19.5ms | ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 22:43:44', '2017-02-18 22:43:44', 922721480)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 22:43:44', '2017-02-18 22:43:44', 141249418)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-18 22:43:44', '2017-02-18 22:43:44', 995863769)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-18 22:43:44', '2017-02-18 22:43:44', 377866774)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 22:43:44', '2017-02-18 22:43:44', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 22:43:44', '2017-02-18 22:43:44', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 22:43:44', '2017-02-18 22:43:44', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 22:43:44', '2017-02-18 22:43:44', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 22:43:44', '2017-02-18 22:43:44', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 22:43:44', '2017-02-18 22:43:44', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 22:43:44', '2017-02-18 22:43:44', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 22:43:44', '2017-02-18 22:43:44', 298486374)[0m
  [1m[35m (2.2ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://test.host/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
Processing by SubjectsController#new as HTML
  Rendered subjects/new.html.erb within layouts/application (13.9ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 153ms (Views: 149.9ms | ActiveRecord: 0.1ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
Processing by SubjectsController#index as HTML
  [1m[35mSubject Load (0.1ms)[0m  SELECT "subjects".* FROM "subjects"
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 22]]
  Rendered subjects/index.html.erb within layouts/application (3.1ms)
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.1ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$MJjx4cPOeARn97NyBZ20B.YeDwuQIIP7.xC8TgyxMu2Jp5vcmT3mO"], ["created_at", "2017-02-18 22:43:45.273131"], ["updated_at", "2017-02-18 22:43:45.273131"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$y.jErUdpY3LlqGMCjCQPfOX.EWizmTFkBQZbS.3F6bhzPnonz0b8y"], ["created_at", "2017-02-18 22:43:45.277488"], ["updated_at", "2017-02-18 22:43:45.277488"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$IajZs3KU6vXbvJqA6wHd7uWCO7Ki.3394bfAbN.ZYOTqK4KQFCkmS"], ["created_at", "2017-02-18 22:43:45.282192"], ["updated_at", "2017-02-18 22:43:45.282192"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
Processing by LessonsController#index as HTML
  Rendered lessons/index.html.erb within layouts/application (0.2ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Completed 200 OK in 5ms (Views: 4.3ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
Processing by LessonsController#new as HTML
  Rendered lessons/new.html.erb within layouts/application (0.2ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 8ms (Views: 2.9ms | ActiveRecord: 0.2ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 22:43:45 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 12ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 22:43:45 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.6ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 22:43:45 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 22:43:45 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integration_test", "name"=>"Integration Test", "email"=>"integration@test.co.uk", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.6ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-18 22:43:45 +0000
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (2.4ms)
  [1m[36mCACHE (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 25ms (Views: 24.0ms | ActiveRecord: 0.2ms)
Started POST "/login" for 127.0.0.1 at 2017-02-18 22:43:45 +0000
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"email"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 22:45:01', '2017-02-18 22:45:01', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 22:45:01', '2017-02-18 22:45:01', 141249418)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-18 22:45:01', '2017-02-18 22:45:01', 995863769)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-18 22:45:01', '2017-02-18 22:45:01', 377866774)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 22:45:01', '2017-02-18 22:45:01', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 22:45:01', '2017-02-18 22:45:01', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 22:45:01', '2017-02-18 22:45:01', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 22:45:01', '2017-02-18 22:45:01', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 22:45:01', '2017-02-18 22:45:01', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 22:45:01', '2017-02-18 22:45:01', 298486374)
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 22:45:01', '2017-02-18 22:45:01', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 22:45:01', '2017-02-18 22:45:01', 298486374)[0m
  [1m[35m (2.7ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
Processing by SubjectsController#index as HTML
  [1m[35mSubject Load (0.3ms)[0m  SELECT "subjects".* FROM "subjects"
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 22]]
  Rendered subjects/index.html.erb within layouts/application (21.0ms)
Completed 500 Internal Server Error in 33ms (ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
Processing by SubjectsController#new as HTML
  Rendered subjects/new.html.erb within layouts/application (11.6ms)
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Completed 200 OK in 156ms (Views: 155.3ms | ActiveRecord: 0.3ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 22:45:01 +0000
Processing by UsersController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 8ms (ActiveRecord: 0.1ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2017-02-18 22:45:01 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integration_test", "name"=>"Integration Test", "email"=>"integration@test.co.uk", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 22:45:01 +0000
Processing by UsersController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2017-02-18 22:45:01 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$E9cgGB1UxzoDaHszFoKK4.9JNpo0DFaHyIrfCbuLiDlhfzyEgvPnW"], ["created_at", "2017-02-18 22:45:01.898938"], ["updated_at", "2017-02-18 22:45:01.898938"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$JW029s5dQC85NECWtcxaf.ZZgd65WGgLT.YWNvWvw.M5RZGDC52be"], ["created_at", "2017-02-18 22:45:01.922683"], ["updated_at", "2017-02-18 22:45:01.922683"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.5ms)[0m  begin transaction
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$cwrLAo.seCis.SwUAImr/eiZnWIPZC/13x8Lea46dQWoDn68ccr9i"], ["created_at", "2017-02-18 22:45:01.944307"], ["updated_at", "2017-02-18 22:45:01.944307"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
Processing by LessonsController#new as HTML
  Rendered lessons/new.html.erb within layouts/application (0.4ms)
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 14ms (Views: 8.5ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
Processing by LessonsController#index as HTML
  Rendered lessons/index.html.erb within layouts/application (2.6ms)
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Completed 200 OK in 5ms (Views: 4.9ms | ActiveRecord: 0.2ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 922721480]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 141249418]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863769]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 377866774]]
Processing by UsersController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Redirected to http://test.host/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-18 22:45:01 +0000
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (1.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 12ms (Views: 9.1ms | ActiveRecord: 0.5ms)
Started POST "/login" for 127.0.0.1 at 2017-02-18 22:45:02 +0000
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"email"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 22:45:37', '2017-02-18 22:45:37', 922721480)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 22:45:37', '2017-02-18 22:45:37', 141249418)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-18 22:45:37', '2017-02-18 22:45:37', 995863769)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-18 22:45:37', '2017-02-18 22:45:37', 377866774)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 22:45:37', '2017-02-18 22:45:37', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 22:45:37', '2017-02-18 22:45:37', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 22:45:37', '2017-02-18 22:45:37', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 22:45:37', '2017-02-18 22:45:37', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 22:45:37', '2017-02-18 22:45:37', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 22:45:37', '2017-02-18 22:45:37', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 22:45:37', '2017-02-18 22:45:37', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 22:45:37', '2017-02-18 22:45:37', 298486374)[0m
  [1m[35m (2.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$0PDlAOljbjtNoy7s.2W3EuvWdntZoXldmpIMozkdzgpDLMnps5k/O"], ["created_at", "2017-02-18 22:45:37.265273"], ["updated_at", "2017-02-18 22:45:37.265273"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$DW94yKTcxLsoNcqUGh4UYuwBeNX6Kfl/KwfK9IRd6U/rWRZKLgR4i"], ["created_at", "2017-02-18 22:45:37.274906"], ["updated_at", "2017-02-18 22:45:37.274906"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$Jx3IrfbLXWkGaJtNO/y9eu2sBwRzLJuzJag92Iw4DIon6TTgbWFrC"], ["created_at", "2017-02-18 22:45:37.302901"], ["updated_at", "2017-02-18 22:45:37.302901"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (1.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://test.host/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
Processing by SubjectsController#index as HTML
  [1m[36mSubject Load (0.1ms)[0m  [1mSELECT "subjects".* FROM "subjects"[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 22]]
  Rendered subjects/index.html.erb within layouts/application (6.3ms)
Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 22:45:37 +0000
Processing by UsersController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 8ms (ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2017-02-18 22:45:37 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 22:45:37 +0000
Processing by UsersController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
Started POST "/users" for 127.0.0.1 at 2017-02-18 22:45:37 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integration_test", "name"=>"Integration Test", "email"=>"integration@test.co.uk", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 5ms (ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users"
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
Processing by LessonsController#index as HTML
  Rendered lessons/index.html.erb within layouts/application (0.3ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 178ms (Views: 178.1ms | ActiveRecord: 0.1ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
Processing by LessonsController#new as HTML
  Rendered lessons/new.html.erb within layouts/application (0.2ms)
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Completed 200 OK in 4ms (Views: 2.0ms | ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-18 22:45:37 +0000
Processing by SessionsController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
  Rendered sessions/new.html.erb within layouts/application (5.4ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Completed 200 OK in 11ms (Views: 9.3ms | ActiveRecord: 0.2ms)
Started POST "/login" for 127.0.0.1 at 2017-02-18 22:45:37 +0000
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"email"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 22:46:03', '2017-02-18 22:46:03', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 22:46:03', '2017-02-18 22:46:03', 141249418)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-18 22:46:03', '2017-02-18 22:46:03', 995863769)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-18 22:46:03', '2017-02-18 22:46:03', 377866774)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 22:46:03', '2017-02-18 22:46:03', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 22:46:03', '2017-02-18 22:46:03', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 22:46:03', '2017-02-18 22:46:03', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 22:46:03', '2017-02-18 22:46:03', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 22:46:03', '2017-02-18 22:46:03', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 22:46:03', '2017-02-18 22:46:03', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 22:46:03', '2017-02-18 22:46:03', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 22:46:03', '2017-02-18 22:46:03', 298486374)[0m
  [1m[35m (2.2ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-18 22:46:03 +0000
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (9.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 158ms (Views: 147.5ms | ActiveRecord: 0.2ms)
Started POST "/login" for 127.0.0.1 at 2017-02-18 22:46:03 +0000
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"email"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 22:46:03 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 22:46:03 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integration_test", "name"=>"Integration Test", "email"=>"integration@test.co.uk", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 22:46:03 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 22:46:03 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.6ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$oNDZ7B7tPegQun5HYTMjG.umkV2GRBkp9m3F5kokQgR6qzYBRbFFy"], ["created_at", "2017-02-18 22:46:03.975772"], ["updated_at", "2017-02-18 22:46:03.975772"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (3.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$yyCmiIAPKJ57RfYEFBwayeInVeILXAOaLPuIwcF56I7Sd1flHl3zC"], ["created_at", "2017-02-18 22:46:04.000880"], ["updated_at", "2017-02-18 22:46:04.000880"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$k6/DQaozCDEi35ag3yWlueKJMN6ZelQTG79jguTnTmY4wpan5MdDC"], ["created_at", "2017-02-18 22:46:04.020941"], ["updated_at", "2017-02-18 22:46:04.020941"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://test.host/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 12ms (ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
Processing by SubjectsController#index as HTML
  [1m[36mSubject Load (0.1ms)[0m  [1mSELECT "subjects".* FROM "subjects"[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 22]]
  Rendered subjects/index.html.erb within layouts/application (22.4ms)
Completed 500 Internal Server Error in 26ms (ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 22:46:25', '2017-02-18 22:46:25', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 22:46:25', '2017-02-18 22:46:25', 141249418)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-18 22:46:25', '2017-02-18 22:46:25', 995863769)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-18 22:46:25', '2017-02-18 22:46:25', 377866774)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 22:46:25', '2017-02-18 22:46:25', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 22:46:25', '2017-02-18 22:46:25', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 22:46:25', '2017-02-18 22:46:25', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 22:46:25', '2017-02-18 22:46:25', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 22:46:25', '2017-02-18 22:46:25', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 22:46:25', '2017-02-18 22:46:25', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 22:46:25', '2017-02-18 22:46:25', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 22:46:25', '2017-02-18 22:46:25', 298486374)[0m
  [1m[35m (2.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 22:46:25 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 28ms (ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 22:46:25 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 22:46:25 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 22:46:25 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integration_test", "name"=>"Integration Test", "email"=>"integration@test.co.uk", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$9lY3gIE2Tex3PJmGxRpgJOcKzEDuSBYPkOGs/mJB8BnfgHd6W58na"], ["created_at", "2017-02-18 22:46:25.931762"], ["updated_at", "2017-02-18 22:46:25.931762"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$RMQ0U4xt85cHUBJZuEwIauEIOouKdkc3rQxuKSHniIMa8XMlNZpHG"], ["created_at", "2017-02-18 22:46:25.950974"], ["updated_at", "2017-02-18 22:46:25.950974"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$W8nIiAqeHr3GOus7c6Bu9eu6KTjo1GVTZJ3jSo1fFfoaqnw.8T0de"], ["created_at", "2017-02-18 22:46:25.963688"], ["updated_at", "2017-02-18 22:46:25.963688"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (2.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://test.host/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.5ms)[0m  begin transaction
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-18 22:46:25 +0000
Processing by SessionsController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
  Rendered sessions/new.html.erb within layouts/application (8.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Completed 200 OK in 172ms (Views: 170.8ms | ActiveRecord: 0.2ms)
Started POST "/login" for 127.0.0.1 at 2017-02-18 22:46:26 +0000
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"email"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 22:48:54', '2017-02-18 22:48:54', 922721480)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 22:48:54', '2017-02-18 22:48:54', 141249418)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-18 22:48:54', '2017-02-18 22:48:54', 995863769)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-18 22:48:54', '2017-02-18 22:48:54', 377866774)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 22:48:54', '2017-02-18 22:48:54', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 22:48:54', '2017-02-18 22:48:54', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.9ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 22:48:54', '2017-02-18 22:48:54', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 22:48:54', '2017-02-18 22:48:54', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 22:48:54', '2017-02-18 22:48:54', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 22:48:54', '2017-02-18 22:48:54', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 22:48:54', '2017-02-18 22:48:54', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 22:48:54', '2017-02-18 22:48:54', 298486374)[0m
  [1m[35m (2.2ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$tXdBjuq9FVIGEie7wkxWl.aLpJkZHpy0UXvgBBGyOfzWmMQBDDuBC"], ["created_at", "2017-02-18 22:48:54.383052"], ["updated_at", "2017-02-18 22:48:54.383052"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$koFz0ARqGM/Ed.O5MBy8lecBCtBEHpw84V0/S8OdKtdCCyv4xETli"], ["created_at", "2017-02-18 22:48:54.409797"], ["updated_at", "2017-02-18 22:48:54.409797"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$L/tqeDB1pppCnV1.grmNsu74KMk6GUoKP9AXypZTlHlCPOzXy9yHi"], ["created_at", "2017-02-18 22:48:54.422666"], ["updated_at", "2017-02-18 22:48:54.422666"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 22:48:54 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 8ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 22:48:54 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 22:48:54 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 22:48:54 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integration_test", "name"=>"Integration Test", "email"=>"integration@test.co.uk", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-18 22:48:54 +0000
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (10.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 172ms (Views: 170.2ms | ActiveRecord: 0.4ms)
Started POST "/login" for 127.0.0.1 at 2017-02-18 22:48:54 +0000
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"email"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 22:50:33', '2017-02-18 22:50:33', 922721480)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 22:50:33', '2017-02-18 22:50:33', 141249418)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-18 22:50:33', '2017-02-18 22:50:33', 995863769)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-18 22:50:33', '2017-02-18 22:50:33', 377866774)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 22:50:33', '2017-02-18 22:50:33', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 22:50:33', '2017-02-18 22:50:33', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 22:50:33', '2017-02-18 22:50:33', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 22:50:33', '2017-02-18 22:50:33', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 22:50:33', '2017-02-18 22:50:33', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 22:50:33', '2017-02-18 22:50:33', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 22:50:33', '2017-02-18 22:50:33', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 22:50:33', '2017-02-18 22:50:33', 298486374)[0m
  [1m[35m (2.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$U8uVOhm27.OZRXHeUJSQ8OsThosjxbYbFpdsQpI3lSvSX7mA68Fe6"], ["created_at", "2017-02-18 22:50:33.594832"], ["updated_at", "2017-02-18 22:50:33.594832"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$9pQ8zoUyrw7I/u7ij0qCoO/3yAMRnHSkTiHFVBlD0YUFWGvlmH3am"], ["created_at", "2017-02-18 22:50:33.629000"], ["updated_at", "2017-02-18 22:50:33.629000"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$nDXGtXrzNhiwLKaSF1rHEOQM941sPsMY.v0fe8w/bUyEwgSTyx1Mq"], ["created_at", "2017-02-18 22:50:33.642274"], ["updated_at", "2017-02-18 22:50:33.642274"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 22:50:33 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 11ms (ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 22:50:33 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 22:50:33 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 22:50:33 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integration_test", "name"=>"Integration Test", "email"=>"integration@test.co.uk", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-18 22:50:33 +0000
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (8.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 198ms (Views: 197.0ms | ActiveRecord: 0.2ms)
Started POST "/login" for 127.0.0.1 at 2017-02-18 22:50:33 +0000
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"email"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 22:52:10', '2017-02-18 22:52:10', 922721480)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 22:52:10', '2017-02-18 22:52:10', 141249418)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-18 22:52:10', '2017-02-18 22:52:10', 995863769)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-18 22:52:10', '2017-02-18 22:52:10', 377866774)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 22:52:10', '2017-02-18 22:52:10', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 22:52:10', '2017-02-18 22:52:10', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 22:52:10', '2017-02-18 22:52:10', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 22:52:10', '2017-02-18 22:52:10', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 22:52:10', '2017-02-18 22:52:10', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 22:52:10', '2017-02-18 22:52:10', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 22:52:10', '2017-02-18 22:52:10', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 22:52:10', '2017-02-18 22:52:10', 298486374)[0m
  [1m[35m (6.2ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-18 22:52:10 +0000
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (11.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 165ms (Views: 155.6ms | ActiveRecord: 0.1ms)
Started POST "/login" for 127.0.0.1 at 2017-02-18 22:52:10 +0000
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"email"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$62YKpUf2mLkTIdJrikCcj.xPD4EBGaqaal4rKu3M9orFQLZwDpbaa"], ["created_at", "2017-02-18 22:52:10.893290"], ["updated_at", "2017-02-18 22:52:10.893290"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$SROR5As98CDE16fVRY9lfeJrXFnq.Ne9RPBX6o/DtnosaUZNugjV."], ["created_at", "2017-02-18 22:52:10.908901"], ["updated_at", "2017-02-18 22:52:10.908901"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$nDXIDUNP49jwA.CHAccX7upVD238eIreDagF2d/PHhGrbSExjj9yS"], ["created_at", "2017-02-18 22:52:10.912913"], ["updated_at", "2017-02-18 22:52:10.912913"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 22:52:10 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 22:52:10 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 22:52:10 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 22:52:10 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integ_test", "name"=>"Integration Test", "email"=>"integration@test.co.uk", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 22:52:26', '2017-02-18 22:52:26', 922721480)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 22:52:26', '2017-02-18 22:52:26', 141249418)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-18 22:52:26', '2017-02-18 22:52:26', 995863769)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-18 22:52:26', '2017-02-18 22:52:26', 377866774)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 22:52:26', '2017-02-18 22:52:26', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 22:52:26', '2017-02-18 22:52:26', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 22:52:26', '2017-02-18 22:52:26', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 22:52:26', '2017-02-18 22:52:26', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 22:52:26', '2017-02-18 22:52:26', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 22:52:26', '2017-02-18 22:52:26', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 22:52:26', '2017-02-18 22:52:26', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 22:52:26', '2017-02-18 22:52:26', 298486374)[0m
  [1m[35m (2.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$oxbnHnp0CMjJYPG1aGUaduB/SdT02xFM0PyeLPTIwKZPKPShOgajq"], ["created_at", "2017-02-18 22:52:26.157263"], ["updated_at", "2017-02-18 22:52:26.157263"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$.J/HkW7KkfToGcDOnonv3OA3uu./bmIVkBhy8eIQVRJMOEHVzMLEK"], ["created_at", "2017-02-18 22:52:26.203223"], ["updated_at", "2017-02-18 22:52:26.203223"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$YyZs4aM2O1eEeBQQXwXkxOMZdU3MIPm221B83aZkYcHKJU3HYe.E2"], ["created_at", "2017-02-18 22:52:26.218131"], ["updated_at", "2017-02-18 22:52:26.218131"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[36mUser Exists (13.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-18 22:52:26 +0000
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (10.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 203ms (Views: 176.0ms | ActiveRecord: 0.6ms)
Started POST "/login" for 127.0.0.1 at 2017-02-18 22:52:26 +0000
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"email"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 22:52:26 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 22:52:26 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 22:52:26 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 22:52:26 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integrate", "name"=>"Integration Test", "email"=>"integration@test.co.uk", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 22:53:53', '2017-02-18 22:53:53', 922721480)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 22:53:53', '2017-02-18 22:53:53', 141249418)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-18 22:53:53', '2017-02-18 22:53:53', 995863769)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-18 22:53:53', '2017-02-18 22:53:53', 377866774)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 22:53:53', '2017-02-18 22:53:53', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 22:53:53', '2017-02-18 22:53:53', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 22:53:53', '2017-02-18 22:53:53', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 22:53:53', '2017-02-18 22:53:53', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 22:53:53', '2017-02-18 22:53:53', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 22:53:53', '2017-02-18 22:53:53', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 22:53:53', '2017-02-18 22:53:53', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 22:53:53', '2017-02-18 22:53:53', 298486374)[0m
  [1m[35m (3.0ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-18 22:53:53 +0000
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (10.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 170ms (Views: 154.7ms | ActiveRecord: 0.3ms)
Started POST "/login" for 127.0.0.1 at 2017-02-18 22:53:54 +0000
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"email"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 22:53:54 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 22:53:54 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integrate", "name"=>"Integration", "email"=>"integration@test.co.uk", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 22:53:54 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 22:53:54 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$icNFeB4UJvX5zPNECX/lBOCaGOH183XYCbd/hJRKQIHgNqPG0/P1a"], ["created_at", "2017-02-18 22:53:54.184060"], ["updated_at", "2017-02-18 22:53:54.184060"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$FK2XCVE7SdpDroWNFuHraOdGUpvILaasj.CPQdiPDpSID2zwMXi/C"], ["created_at", "2017-02-18 22:53:54.212487"], ["updated_at", "2017-02-18 22:53:54.212487"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$n9z9lBSOyqki0kWnRZF8vOn.Nj2cM9FK2sTgg27Td/kOQIScQO.5e"], ["created_at", "2017-02-18 22:53:54.224712"], ["updated_at", "2017-02-18 22:53:54.224712"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (5.9ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 22:55:50', '2017-02-18 22:55:50', 922721480)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 22:55:50', '2017-02-18 22:55:50', 141249418)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-18 22:55:50', '2017-02-18 22:55:50', 995863769)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-18 22:55:50', '2017-02-18 22:55:50', 377866774)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 22:55:50', '2017-02-18 22:55:50', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 22:55:50', '2017-02-18 22:55:50', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 22:55:50', '2017-02-18 22:55:50', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 22:55:50', '2017-02-18 22:55:50', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 22:55:50', '2017-02-18 22:55:50', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 22:55:50', '2017-02-18 22:55:50', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 22:55:50', '2017-02-18 22:55:50', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 22:55:50', '2017-02-18 22:55:50', 298486374)[0m
  [1m[35m (2.4ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 22:55:50 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 18ms (ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 22:55:50 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 22:55:50 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 22:55:50 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integrate", "name"=>"Integration", "email"=>"integration@test.co.uk", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-18 22:55:50 +0000
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (37.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 176ms (Views: 175.3ms | ActiveRecord: 0.2ms)
Started POST "/login" for 127.0.0.1 at 2017-02-18 22:55:50 +0000
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"email"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$8vzNULQlveUfXCSNQM7SH.WdFA2JYKnA6geSuh62ScbZHCdMo71me"], ["created_at", "2017-02-18 22:55:50.952688"], ["updated_at", "2017-02-18 22:55:50.952688"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$ZVOdZ2wj7B36e.CdVvzMQ.vW5tc9RI7z9QvgbQntgcKEBlfMqDl1e"], ["created_at", "2017-02-18 22:55:50.965784"], ["updated_at", "2017-02-18 22:55:50.965784"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$aR2XBuDh2cRJhlXGSkEatuCGJz/kGJFVD4rVkllyI6KUZOCIfETuO"], ["created_at", "2017-02-18 22:55:50.984925"], ["updated_at", "2017-02-18 22:55:50.984925"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 22:56:40', '2017-02-18 22:56:40', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 22:56:40', '2017-02-18 22:56:40', 141249418)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-18 22:56:40', '2017-02-18 22:56:40', 995863769)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-18 22:56:40', '2017-02-18 22:56:40', 377866774)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 22:56:40', '2017-02-18 22:56:40', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 22:56:40', '2017-02-18 22:56:40', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 22:56:40', '2017-02-18 22:56:40', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 22:56:40', '2017-02-18 22:56:40', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 22:56:40', '2017-02-18 22:56:40', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 22:56:40', '2017-02-18 22:56:40', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 22:56:40', '2017-02-18 22:56:40', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 22:56:40', '2017-02-18 22:56:40', 298486374)[0m
  [1m[35m (4.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 22:56:40 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 16ms (ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 22:56:40 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 22:56:40 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 22:56:40 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integrate", "name"=>"Integration", "email"=>"integration@test.co.uk", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-18 22:56:40 +0000
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (15.5ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 185ms (Views: 184.0ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$vTNVUiw2sORMfh2xaogILuZfgpEcFXwnxaT.jqHyxQyyuvgwl.jnK"], ["created_at", "2017-02-18 22:56:41.165510"], ["updated_at", "2017-02-18 22:56:41.165510"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$wJocEIoWd.8RkKZ6VnDlTOkRtHGHWhuBZmvIu7xL3eJvExYcOvQXK"], ["created_at", "2017-02-18 22:56:41.174290"], ["updated_at", "2017-02-18 22:56:41.174290"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$WbjkoSUxb3m3IoDzInHVD.HU1WD7p2AzVTZiAwAsGp8G/l1URKBkq"], ["created_at", "2017-02-18 22:56:41.198986"], ["updated_at", "2017-02-18 22:56:41.198986"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 22:56:51', '2017-02-18 22:56:51', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 22:56:51', '2017-02-18 22:56:51', 141249418)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-18 22:56:51', '2017-02-18 22:56:51', 995863769)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-18 22:56:51', '2017-02-18 22:56:51', 377866774)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 22:56:51', '2017-02-18 22:56:51', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 22:56:51', '2017-02-18 22:56:51', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 22:56:51', '2017-02-18 22:56:51', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 22:56:51', '2017-02-18 22:56:51', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 22:56:51', '2017-02-18 22:56:51', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 22:56:51', '2017-02-18 22:56:51', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 22:56:51', '2017-02-18 22:56:51', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 22:56:51', '2017-02-18 22:56:51', 298486374)[0m
  [1m[35m (2.2ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$uw.OFxYF5ZoPcu5egqaS/.xfkLQDr.iH.2SNfvjSKDim/iCCadgnK"], ["created_at", "2017-02-18 22:56:51.709860"], ["updated_at", "2017-02-18 22:56:51.709860"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$uezNVZlczFdkcCjNeHHfsuvl8tr5ajF/qADFHSud.1mTqQR8m6Lhq"], ["created_at", "2017-02-18 22:56:51.715234"], ["updated_at", "2017-02-18 22:56:51.715234"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$qCuPlSQ1kvfpz/9fDoxHUOXNwnxUNsav56mbDOr8K0HMukFJUXqGu"], ["created_at", "2017-02-18 22:56:51.721366"], ["updated_at", "2017-02-18 22:56:51.721366"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-18 22:56:51 +0000
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (8.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 187ms (Views: 175.5ms | ActiveRecord: 0.2ms)
Started POST "/login" for 127.0.0.1 at 2017-02-18 22:56:52 +0000
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"email"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 22:56:52 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 22:56:52 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 22:56:52 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 22:56:52 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integrate", "name"=>"Integration", "email"=>"integration@test.co.uk", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 23:01:44', '2017-02-18 23:01:44', 922721480)
  [1m[36mFixture Insert (1.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 23:01:44', '2017-02-18 23:01:44', 141249418)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-18 23:01:44', '2017-02-18 23:01:44', 995863769)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-18 23:01:44', '2017-02-18 23:01:44', 377866774)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:01:44', '2017-02-18 23:01:44', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:01:44', '2017-02-18 23:01:44', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:01:44', '2017-02-18 23:01:44', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:01:44', '2017-02-18 23:01:44', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 23:01:44', '2017-02-18 23:01:44', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 23:01:44', '2017-02-18 23:01:44', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:01:44', '2017-02-18 23:01:44', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:01:44', '2017-02-18 23:01:44', 298486374)[0m
  [1m[35m (2.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-18 23:01:44 +0000
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (13.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 148ms (Views: 139.2ms | ActiveRecord: 0.2ms)
Started POST "/login" for 127.0.0.1 at 2017-02-18 23:01:45 +0000
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"email"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:01:45 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:01:45 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:01:45 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:01:45 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integrate", "name"=>"Integration", "email"=>"integration@test.co.uk", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$dtVg4jzbq.lQco43ONDSD.qgEhvwG9nvrZXgAnkCeN7UaYVlf20Aa"], ["created_at", "2017-02-18 23:01:45.188267"], ["updated_at", "2017-02-18 23:01:45.188267"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$76Y88As4bcAvkCGOWjdYp.jDMTtY8S.aqVyLrJH6gaPEfyM924/sa"], ["created_at", "2017-02-18 23:01:45.193718"], ["updated_at", "2017-02-18 23:01:45.193718"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$/qLzWcP.XkteCmT/NeFe9Ot.ERn9hMko4ttiE6ixiQV7tM5sT7Nt2"], ["created_at", "2017-02-18 23:01:45.209893"], ["updated_at", "2017-02-18 23:01:45.209893"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 23:02:20', '2017-02-18 23:02:20', 922721480)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 23:02:20', '2017-02-18 23:02:20', 141249418)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-18 23:02:20', '2017-02-18 23:02:20', 995863769)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-18 23:02:20', '2017-02-18 23:02:20', 377866774)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:02:20', '2017-02-18 23:02:20', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:02:20', '2017-02-18 23:02:20', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:02:20', '2017-02-18 23:02:20', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:02:20', '2017-02-18 23:02:20', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 23:02:20', '2017-02-18 23:02:20', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 23:02:20', '2017-02-18 23:02:20', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:02:20', '2017-02-18 23:02:20', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:02:20', '2017-02-18 23:02:20', 298486374)[0m
  [1m[35m (2.1ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-18 23:02:20 +0000
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (11.5ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 159ms (Views: 144.5ms | ActiveRecord: 0.2ms)
Started POST "/login" for 127.0.0.1 at 2017-02-18 23:02:20 +0000
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"email"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$8qNJus1MLMsRXIaxcn4J7equSE5KGI5xDe5yBD2YDi1l/iISmDbwy"], ["created_at", "2017-02-18 23:02:20.583155"], ["updated_at", "2017-02-18 23:02:20.583155"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (1.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$WYPZ1wfvXxrieC34Y6TVneCLi6jpwfHhcu.Rk6BazvgQQbVDsXNtC"], ["created_at", "2017-02-18 23:02:20.608863"], ["updated_at", "2017-02-18 23:02:20.608863"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$b7S6yMQu4/ZyTqX5022FDuk2jN0FYMgIYTQ6IE7PFvsF36GTYDski"], ["created_at", "2017-02-18 23:02:20.615452"], ["updated_at", "2017-02-18 23:02:20.615452"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:02:20 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:02:20 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:02:20 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:02:20 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integrate", "name"=>"Integration", "email"=>"integration@test.co.uk", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 23:04:57', '2017-02-18 23:04:57', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 23:04:57', '2017-02-18 23:04:57', 141249418)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-18 23:04:57', '2017-02-18 23:04:57', 995863769)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-18 23:04:57', '2017-02-18 23:04:57', 377866774)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:04:57', '2017-02-18 23:04:57', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:04:57', '2017-02-18 23:04:57', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:04:57', '2017-02-18 23:04:57', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:04:57', '2017-02-18 23:04:57', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 23:04:57', '2017-02-18 23:04:57', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 23:04:57', '2017-02-18 23:04:57', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:04:57', '2017-02-18 23:04:57', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:04:57', '2017-02-18 23:04:57', 298486374)[0m
  [1m[35m (2.5ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:04:57 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 12ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:04:57 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:04:57 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:04:57 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integrate", "name"=>"Integration", "email"=>"integration@test.co.uk", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-18 23:04:57 +0000
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (9.5ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 151ms (Views: 150.1ms | ActiveRecord: 0.1ms)
Started POST "/login" for 127.0.0.1 at 2017-02-18 23:04:57 +0000
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"email"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$lvSUfgrjsF6CWy4mYYAquuYhO6nEFykeh9bfLaqDf6RDTh/gNps0e"], ["created_at", "2017-02-18 23:04:57.561201"], ["updated_at", "2017-02-18 23:04:57.561201"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$gE8hV5DaFwp7.4EInc1sueBONseNG1dVH.vp2hbYfW4blf6eg5oai"], ["created_at", "2017-02-18 23:04:57.574159"], ["updated_at", "2017-02-18 23:04:57.574159"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$6io4wcrrlptcHw3J7unGy.UhwhtT4t7gEBgNFvKfFz7fkXhXmyY4i"], ["created_at", "2017-02-18 23:04:57.578601"], ["updated_at", "2017-02-18 23:04:57.578601"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 23:05:07', '2017-02-18 23:05:07', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 23:05:07', '2017-02-18 23:05:07', 141249418)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-18 23:05:07', '2017-02-18 23:05:07', 995863769)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-18 23:05:07', '2017-02-18 23:05:07', 377866774)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:05:07', '2017-02-18 23:05:07', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:05:07', '2017-02-18 23:05:07', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:05:07', '2017-02-18 23:05:07', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:05:07', '2017-02-18 23:05:07', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 23:05:07', '2017-02-18 23:05:07', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 23:05:07', '2017-02-18 23:05:07', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:05:07', '2017-02-18 23:05:07', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:05:07', '2017-02-18 23:05:07', 298486374)[0m
  [1m[35m (2.5ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:05:07 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 16ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:05:07 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integrate", "name"=>"Integration", "email"=>"integration@test.co.uk", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:05:07 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:05:07 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$hwo2UpeT2IyPlfVpNzt36OkNhFioIfcpX1hJTnJlsf2sMmbyCLkxy"], ["created_at", "2017-02-18 23:05:07.353039"], ["updated_at", "2017-02-18 23:05:07.353039"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$Gx4ed46yzW54zBOC1.K90On5uWz71aHNhm7b2WAdbure91DKHBz6O"], ["created_at", "2017-02-18 23:05:07.362736"], ["updated_at", "2017-02-18 23:05:07.362736"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$OJpcyKp4Qkl3b/6jxeIlp.ptRc7b4R6o.jz8x0gnocQMWMZ.lEChW"], ["created_at", "2017-02-18 23:05:07.374084"], ["updated_at", "2017-02-18 23:05:07.374084"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[36mUser Exists (2.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-18 23:05:07 +0000
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (15.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 185ms (Views: 183.6ms | ActiveRecord: 0.2ms)
Started POST "/login" for 127.0.0.1 at 2017-02-18 23:05:07 +0000
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"email"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 23:06:33', '2017-02-18 23:06:33', 922721480)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 23:06:33', '2017-02-18 23:06:33', 141249418)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-18 23:06:33', '2017-02-18 23:06:33', 995863769)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-18 23:06:33', '2017-02-18 23:06:33', 377866774)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:06:33', '2017-02-18 23:06:33', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:06:33', '2017-02-18 23:06:33', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:06:33', '2017-02-18 23:06:33', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:06:33', '2017-02-18 23:06:33', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 23:06:33', '2017-02-18 23:06:33', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 23:06:33', '2017-02-18 23:06:33', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:06:33', '2017-02-18 23:06:33', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:06:33', '2017-02-18 23:06:33', 298486374)[0m
  [1m[35m (2.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-18 23:06:33 +0000
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (13.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 165ms (Views: 154.5ms | ActiveRecord: 0.2ms)
Started POST "/login" for 127.0.0.1 at 2017-02-18 23:06:33 +0000
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"email"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$RH8xfIm/lSQUCCwuZgqtJer6LcKH/WYPbMD04RGTPXJD3J8kVVrgK"], ["created_at", "2017-02-18 23:06:33.632284"], ["updated_at", "2017-02-18 23:06:33.632284"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.0ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$x4VIuVqAeEu24Dy76X.95.uHzxDToEqxgYjhMx5kYnNm1XKQAcGLy"], ["created_at", "2017-02-18 23:06:33.637041"], ["updated_at", "2017-02-18 23:06:33.637041"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$Bn993zlGC5NkmW7FlW8r1OIHfqS.XMoCIboX3kuwKrUO4mY69otBq"], ["created_at", "2017-02-18 23:06:33.655901"], ["updated_at", "2017-02-18 23:06:33.655901"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:06:33 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:06:33 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:06:33 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.3ms)
  [1m[36m (6.5ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:06:33 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integrate", "name"=>"Integration", "email"=>"integration@test.co.uk", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (1.0ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 23:07:47', '2017-02-18 23:07:47', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 23:07:47', '2017-02-18 23:07:47', 141249418)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-18 23:07:47', '2017-02-18 23:07:47', 995863769)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-18 23:07:47', '2017-02-18 23:07:47', 377866774)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:07:47', '2017-02-18 23:07:47', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:07:47', '2017-02-18 23:07:47', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:07:47', '2017-02-18 23:07:47', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:07:47', '2017-02-18 23:07:47', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 23:07:47', '2017-02-18 23:07:47', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 23:07:47', '2017-02-18 23:07:47', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:07:47', '2017-02-18 23:07:47', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:07:47', '2017-02-18 23:07:47', 298486374)[0m
  [1m[35m (2.2ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-18 23:07:47 +0000
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (11.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 169ms (Views: 155.3ms | ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:07:47 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:07:47 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:07:47 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:07:47 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integrate", "name"=>"Integration", "email"=>"integration@test.co.uk", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$AMA.hv5PLMIHGCpxz4i6reUbyJ7trTQpserb8WLIb2ykUvXBY3P5i"], ["created_at", "2017-02-18 23:07:47.356892"], ["updated_at", "2017-02-18 23:07:47.356892"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$AfxfzjkkkI3AvO.syXoqh.unhGhHLXLjzsbdMlX1J1ODJu5Z8N67S"], ["created_at", "2017-02-18 23:07:47.366474"], ["updated_at", "2017-02-18 23:07:47.366474"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.4ms)[0m  begin transaction
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$Gn9oNVIvLpmVkGi/osV6bOeNq1EUuduIFLDvp/zacbxCUqLdK32hW"], ["created_at", "2017-02-18 23:07:47.400293"], ["updated_at", "2017-02-18 23:07:47.400293"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 23:12:59', '2017-02-18 23:12:59', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 23:12:59', '2017-02-18 23:12:59', 141249418)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-18 23:12:59', '2017-02-18 23:12:59', 995863769)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-18 23:12:59', '2017-02-18 23:12:59', 377866774)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:12:59', '2017-02-18 23:12:59', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:12:59', '2017-02-18 23:12:59', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:12:59', '2017-02-18 23:12:59', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:12:59', '2017-02-18 23:12:59', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 23:12:59', '2017-02-18 23:12:59', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 23:12:59', '2017-02-18 23:12:59', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:12:59', '2017-02-18 23:12:59', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:12:59', '2017-02-18 23:12:59', 298486374)[0m
  [1m[35m (2.4ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:12:59 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 13ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:12:59 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:12:59 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:12:59 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integrate", "name"=>"Integration", "email"=>"integration@test.co.uk", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$lQYUGxtYaUTmr5gufC6OduK9jAsD2XmFj7Bnlyyvg5kvN.N1ZkY2K"], ["created_at", "2017-02-18 23:12:59.630072"], ["updated_at", "2017-02-18 23:12:59.630072"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$GfiiOQxpyJO6O7sqzpqaseAl.CdLYMq.5LlcK4AwUjkYbe5366K2y"], ["created_at", "2017-02-18 23:12:59.647990"], ["updated_at", "2017-02-18 23:12:59.647990"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$AK9ffcl3lltohQoPAeb4AuyGaxrySQJGP/r4ZLRcsoXIXmuHheDbW"], ["created_at", "2017-02-18 23:12:59.655162"], ["updated_at", "2017-02-18 23:12:59.655162"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (2.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-18 23:12:59 +0000
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (6.8ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 184ms (Views: 180.8ms | ActiveRecord: 0.5ms)
Started POST "/login" for 127.0.0.1 at 2017-02-18 23:12:59 +0000
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"email"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (1.7ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (1.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 23:17:02', '2017-02-18 23:17:02', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 23:17:02', '2017-02-18 23:17:02', 141249418)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-18 23:17:02', '2017-02-18 23:17:02', 995863769)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-18 23:17:02', '2017-02-18 23:17:02', 377866774)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:17:02', '2017-02-18 23:17:02', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:17:02', '2017-02-18 23:17:02', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:17:02', '2017-02-18 23:17:02', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:17:02', '2017-02-18 23:17:02', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 23:17:02', '2017-02-18 23:17:02', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 23:17:02', '2017-02-18 23:17:02', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:17:02', '2017-02-18 23:17:02', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:17:02', '2017-02-18 23:17:02', 298486374)[0m
  [1m[35m (2.4ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:17:02 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 17ms (ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:17:02 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:17:02 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:17:02 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integrate", "name"=>"Integration", "email"=>"integration@test.co.uk", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role_ids"=>["1"]}}}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-18 23:17:02 +0000
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (13.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 154ms (Views: 153.3ms | ActiveRecord: 0.1ms)
Started POST "/login" for 127.0.0.1 at 2017-02-18 23:17:03 +0000
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"email"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$x1Rkm2y3LiRkgrrhg/9kju/DshfQ1hClYMQWEqp2sBkSItGuXlzCO"], ["created_at", "2017-02-18 23:17:03.073333"], ["updated_at", "2017-02-18 23:17:03.073333"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$eUyRshCPibSZEThe8OdXbOPWhjHTKiH9/mqhtjNZUB.R3HSKdFoNi"], ["created_at", "2017-02-18 23:17:03.082554"], ["updated_at", "2017-02-18 23:17:03.082554"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.0ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$7XKdy57Bv6JeyIzS8vDEBO91nSz.lfuulUY4DNInV/mV5qTZjYMz6"], ["created_at", "2017-02-18 23:17:03.086775"], ["updated_at", "2017-02-18 23:17:03.086775"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 23:22:22', '2017-02-18 23:22:22', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 23:22:22', '2017-02-18 23:22:22', 141249418)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-18 23:22:22', '2017-02-18 23:22:22', 995863769)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-18 23:22:22', '2017-02-18 23:22:22', 377866774)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:22:22', '2017-02-18 23:22:22', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:22:22', '2017-02-18 23:22:22', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:22:22', '2017-02-18 23:22:22', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:22:22', '2017-02-18 23:22:22', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 23:22:22', '2017-02-18 23:22:22', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 23:22:22', '2017-02-18 23:22:22', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:22:22', '2017-02-18 23:22:22', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:22:22', '2017-02-18 23:22:22', 298486374)[0m
  [1m[35m (2.3ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$IoMU3LZIItHrgX9ZwKNfc.J/hAgMKGOmb2MRppVHNk6UmjgEw0jKe"], ["created_at", "2017-02-18 23:22:22.349598"], ["updated_at", "2017-02-18 23:22:22.349598"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$pzUVvf.0IW0/O3vQwNWeT.9SQKXvi6/QnKZBQq4mqBF21HA3DF/hK"], ["created_at", "2017-02-18 23:22:22.367649"], ["updated_at", "2017-02-18 23:22:22.367649"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$CD17KwqJ.jnWS84jtkMta.2v.oOFG5zadnCVJwQtLt.HMcVatT.9O"], ["created_at", "2017-02-18 23:22:22.399716"], ["updated_at", "2017-02-18 23:22:22.399716"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-18 23:22:22 +0000
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (6.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 152ms (Views: 143.7ms | ActiveRecord: 0.1ms)
Started POST "/login" for 127.0.0.1 at 2017-02-18 23:22:22 +0000
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"email"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:22:22 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:22:22 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:22:22 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:22:22 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integrate", "name"=>"Integration", "email"=>"integration@test.co.uk", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role_ids"=>["4"]}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 23:23:22', '2017-02-18 23:23:22', 922721480)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 23:23:22', '2017-02-18 23:23:22', 141249418)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-18 23:23:22', '2017-02-18 23:23:22', 995863769)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-18 23:23:22', '2017-02-18 23:23:22', 377866774)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:23:22', '2017-02-18 23:23:22', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:23:22', '2017-02-18 23:23:22', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:23:22', '2017-02-18 23:23:22', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:23:22', '2017-02-18 23:23:22', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 23:23:22', '2017-02-18 23:23:22', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 23:23:22', '2017-02-18 23:23:22', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:23:22', '2017-02-18 23:23:22', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:23:22', '2017-02-18 23:23:22', 298486374)[0m
  [1m[35m (2.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$KWif3GEi/a4yESerq3sXIO1sEI9BWoRktE4g6GSfkTMsanSXFKSLG"], ["created_at", "2017-02-18 23:23:22.591155"], ["updated_at", "2017-02-18 23:23:22.591155"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$lLWmIRWxSWxvnrWULbgeN.cmFo98ALGMeE4kSanIBEFkD/agxhubC"], ["created_at", "2017-02-18 23:23:22.624446"], ["updated_at", "2017-02-18 23:23:22.624446"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$BaGe5k4fhmGxfJdHcTbRf.3sxmH./fIHt.H3vRXIA56X1r9M2GyCW"], ["created_at", "2017-02-18 23:23:22.631566"], ["updated_at", "2017-02-18 23:23:22.631566"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-18 23:23:22 +0000
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (13.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 179ms (Views: 153.7ms | ActiveRecord: 0.1ms)
Started POST "/login" for 127.0.0.1 at 2017-02-18 23:23:22 +0000
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"email"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:23:22 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:23:22 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:23:22 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:23:22 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integrate", "name"=>"Integration", "email"=>"integration@test.co.uk", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role_ids"=>"4"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 23:30:35', '2017-02-18 23:30:35', 922721480)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 23:30:35', '2017-02-18 23:30:35', 141249418)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-18 23:30:35', '2017-02-18 23:30:35', 995863769)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-18 23:30:35', '2017-02-18 23:30:35', 377866774)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:30:35', '2017-02-18 23:30:35', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:30:35', '2017-02-18 23:30:35', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:30:35', '2017-02-18 23:30:35', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:30:35', '2017-02-18 23:30:35', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 23:30:35', '2017-02-18 23:30:35', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 23:30:35', '2017-02-18 23:30:35', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:30:35', '2017-02-18 23:30:35', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:30:35', '2017-02-18 23:30:35', 298486374)[0m
  [1m[35m (2.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$VHoncG/9eGgoV8PVSu5XMel.WebuFmiIBr82VLIR6bldv2DrvBDAK"], ["created_at", "2017-02-18 23:30:35.737019"], ["updated_at", "2017-02-18 23:30:35.737019"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$cWbivI4H.wVbieFxB6z.seZhVDWWjFop.H1hi.I2MhRlanvSOfOu6"], ["created_at", "2017-02-18 23:30:35.776880"], ["updated_at", "2017-02-18 23:30:35.776880"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$GFmGI4DQ3hn5w36Jgi/StOo/kmFp1cLfRwp0BBHlZ4/qWvBiYOb4S"], ["created_at", "2017-02-18 23:30:35.789972"], ["updated_at", "2017-02-18 23:30:35.789972"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (1.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:30:35 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 7ms (ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:30:35 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:30:35 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:30:35 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integrate", "name"=>"Integration", "email"=>"integration@test.co.uk", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role_ids"=>"4"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-18 23:30:35 +0000
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (11.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 166ms (Views: 165.4ms | ActiveRecord: 0.2ms)
Started POST "/login" for 127.0.0.1 at 2017-02-18 23:30:36 +0000
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"email"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 23:31:14', '2017-02-18 23:31:14', 922721480)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 23:31:14', '2017-02-18 23:31:14', 141249418)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-18 23:31:14', '2017-02-18 23:31:14', 995863769)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-18 23:31:14', '2017-02-18 23:31:14', 377866774)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:31:14', '2017-02-18 23:31:14', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:31:14', '2017-02-18 23:31:14', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:31:14', '2017-02-18 23:31:14', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:31:14', '2017-02-18 23:31:14', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 23:31:14', '2017-02-18 23:31:14', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 23:31:14', '2017-02-18 23:31:14', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:31:14', '2017-02-18 23:31:14', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:31:14', '2017-02-18 23:31:14', 298486374)[0m
  [1m[35m (2.1ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$G/2DAtEDx6/EomWhrBaWAOlXgJaaJGG53lhmfmPYV2/s/s2B/01R."], ["created_at", "2017-02-18 23:31:14.405863"], ["updated_at", "2017-02-18 23:31:14.405863"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$xJTfgp.BX1zWCoKcG/5wReuEM32aUEY1InphnK/Isq4z2kJr5XbVO"], ["created_at", "2017-02-18 23:31:14.428040"], ["updated_at", "2017-02-18 23:31:14.428040"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$u2VetgvIt/P7O1WXR..uCu.bP.CPls7yvSiAGcAohXmCCBVakYUta"], ["created_at", "2017-02-18 23:31:14.433744"], ["updated_at", "2017-02-18 23:31:14.433744"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:31:14 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 25ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:31:14 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 4ms (ActiveRecord: 0.5ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:31:14 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:31:14 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integrate", "name"=>"Integration", "email"=>"integration@test.co.uk", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role_ids"=>"4"}}}
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 5ms (ActiveRecord: 0.8ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-18 23:31:14 +0000
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (11.5ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 163ms (Views: 162.1ms | ActiveRecord: 0.2ms)
Started POST "/login" for 127.0.0.1 at 2017-02-18 23:31:14 +0000
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"email"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 23:32:43', '2017-02-18 23:32:43', 922721480)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 23:32:43', '2017-02-18 23:32:43', 141249418)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-18 23:32:43', '2017-02-18 23:32:43', 995863769)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-18 23:32:43', '2017-02-18 23:32:43', 377866774)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:32:43', '2017-02-18 23:32:43', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:32:43', '2017-02-18 23:32:43', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:32:43', '2017-02-18 23:32:43', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:32:43', '2017-02-18 23:32:43', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 23:32:43', '2017-02-18 23:32:43', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 23:32:43', '2017-02-18 23:32:43', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:32:43', '2017-02-18 23:32:43', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:32:43', '2017-02-18 23:32:43', 298486374)[0m
  [1m[35m (2.1ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-18 23:32:43 +0000
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (9.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 171ms (Views: 153.8ms | ActiveRecord: 0.1ms)
Started POST "/login" for 127.0.0.1 at 2017-02-18 23:32:43 +0000
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"email"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$4CS4SE2UyvI2xruOD57lL.pIDBk92PYTAdp2Ien.tjbpeQt87RzPK"], ["created_at", "2017-02-18 23:32:43.302936"], ["updated_at", "2017-02-18 23:32:43.302936"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$P/52CULr0phtLFmgdBE/D.4dinKtWvVK6n0hixdvbiULlY0H5C5Za"], ["created_at", "2017-02-18 23:32:43.324373"], ["updated_at", "2017-02-18 23:32:43.324373"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$dasqtAjofD3gkI68Fk4ECer.Ggy8yrLbqGrBXbSjgieYF9NRZbwhu"], ["created_at", "2017-02-18 23:32:43.332093"], ["updated_at", "2017-02-18 23:32:43.332093"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:32:43 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:32:43 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integrate", "name"=>"Integration", "email"=>"integration@test.co.uk", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role_ids"=>"4"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:32:43 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:32:43 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (1.5ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 23:33:04', '2017-02-18 23:33:04', 922721480)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 23:33:04', '2017-02-18 23:33:04', 141249418)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-18 23:33:04', '2017-02-18 23:33:04', 995863769)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-18 23:33:04', '2017-02-18 23:33:04', 377866774)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:33:04', '2017-02-18 23:33:04', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:33:04', '2017-02-18 23:33:04', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:33:04', '2017-02-18 23:33:04', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:33:04', '2017-02-18 23:33:04', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 23:33:04', '2017-02-18 23:33:04', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 23:33:04', '2017-02-18 23:33:04', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:33:04', '2017-02-18 23:33:04', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:33:04', '2017-02-18 23:33:04', 298486374)[0m
  [1m[35m (2.4ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-18 23:33:04 +0000
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (11.4ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 162ms (Views: 148.5ms | ActiveRecord: 0.2ms)
Started POST "/login" for 127.0.0.1 at 2017-02-18 23:33:04 +0000
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"email"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$7SEsKL80Z2.EM5BWwSsgrOqZzWmZEJuf.iAY12uk7ijTO83I93Eem"], ["created_at", "2017-02-18 23:33:04.457595"], ["updated_at", "2017-02-18 23:33:04.457595"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$96bfSfB1kq99hPJpq2SRhuIhwyHE8Lfb2c8CXbLV736TbP4ZS2Rvy"], ["created_at", "2017-02-18 23:33:04.466597"], ["updated_at", "2017-02-18 23:33:04.466597"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$7PO9eX12A1JqiBAH4orniu7zOz8kL4Vm7nnfz4tLVvjrBWRLEe5Ce"], ["created_at", "2017-02-18 23:33:04.480065"], ["updated_at", "2017-02-18 23:33:04.480065"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:33:04 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 5ms (ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:33:04 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:33:04 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:33:04 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integrate", "name"=>"Integration", "email"=>"integration@test.co.uk", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role_ids"=>"4"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 23:33:20', '2017-02-18 23:33:20', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 23:33:20', '2017-02-18 23:33:20', 141249418)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-18 23:33:20', '2017-02-18 23:33:20', 995863769)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-18 23:33:20', '2017-02-18 23:33:20', 377866774)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:33:20', '2017-02-18 23:33:20', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:33:20', '2017-02-18 23:33:20', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:33:20', '2017-02-18 23:33:20', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:33:20', '2017-02-18 23:33:20', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 23:33:20', '2017-02-18 23:33:20', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 23:33:20', '2017-02-18 23:33:20', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:33:20', '2017-02-18 23:33:20', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:33:20', '2017-02-18 23:33:20', 298486374)[0m
  [1m[35m (2.2ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-18 23:33:20 +0000
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (9.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 163ms (Views: 150.6ms | ActiveRecord: 0.2ms)
Started POST "/login" for 127.0.0.1 at 2017-02-18 23:33:20 +0000
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"email"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:33:20 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:33:20 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:33:20 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:33:20 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integrate", "name"=>"Integration", "email"=>"integration@test.co.uk", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role_ids"=>"4"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$DZefwF36ETh/z7dS0RX6nuedQuYSaH3KSVQmgD3rvri.TOFbNhxT6"], ["created_at", "2017-02-18 23:33:20.573035"], ["updated_at", "2017-02-18 23:33:20.573035"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$3j5ztvgtRB1IT9Hpa.RzYO3NAFQ8Qf91VM9XpMBlMTwC2VUG4JGCm"], ["created_at", "2017-02-18 23:33:20.577920"], ["updated_at", "2017-02-18 23:33:20.577920"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$3YmFNOrZIBso1B.xaM.PvuVHhOD02OZ3XRGylyBgynl1hQZRPKJ/S"], ["created_at", "2017-02-18 23:33:20.608564"], ["updated_at", "2017-02-18 23:33:20.608564"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 23:33:33', '2017-02-18 23:33:33', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 23:33:33', '2017-02-18 23:33:33', 141249418)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-18 23:33:33', '2017-02-18 23:33:33', 995863769)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-18 23:33:33', '2017-02-18 23:33:33', 377866774)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:33:33', '2017-02-18 23:33:33', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:33:33', '2017-02-18 23:33:33', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:33:33', '2017-02-18 23:33:33', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:33:33', '2017-02-18 23:33:33', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 23:33:33', '2017-02-18 23:33:33', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 23:33:33', '2017-02-18 23:33:33', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:33:33', '2017-02-18 23:33:33', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:33:33', '2017-02-18 23:33:33', 298486374)[0m
  [1m[35m (2.3ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$DfHivOeoSghvsp3JkCGhn.ZXx.E8ozZWjp95YyWC5o9UY8vrfZfW."], ["created_at", "2017-02-18 23:33:33.531542"], ["updated_at", "2017-02-18 23:33:33.531542"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$XuNonz0LMGt4qyT9GCxxee6K.A8EgA6V5PGGJhB7gxDsdehVFKkJy"], ["created_at", "2017-02-18 23:33:33.573299"], ["updated_at", "2017-02-18 23:33:33.573299"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$XVNf.WNZ294TQPfjnN5IBeBtQ/BO.OdUM1NMGwWXFkzfDd4Zv3Dm."], ["created_at", "2017-02-18 23:33:33.590381"], ["updated_at", "2017-02-18 23:33:33.590381"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-18 23:33:33 +0000
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (6.0ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 151ms (Views: 142.8ms | ActiveRecord: 0.2ms)
Started POST "/login" for 127.0.0.1 at 2017-02-18 23:33:33 +0000
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"email"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:33:33 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:33:33 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:33:33 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:33:33 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integrate", "name"=>"Integration", "email"=>"integration@test.co.uk", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role_ids"=>"4"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 23:34:50', '2017-02-18 23:34:50', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 23:34:50', '2017-02-18 23:34:50', 141249418)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-18 23:34:50', '2017-02-18 23:34:50', 995863769)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-18 23:34:50', '2017-02-18 23:34:50', 377866774)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:34:50', '2017-02-18 23:34:50', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:34:50', '2017-02-18 23:34:50', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:34:50', '2017-02-18 23:34:50', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:34:50', '2017-02-18 23:34:50', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 23:34:50', '2017-02-18 23:34:50', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 23:34:50', '2017-02-18 23:34:50', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:34:50', '2017-02-18 23:34:50', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:34:50', '2017-02-18 23:34:50', 298486374)[0m
  [1m[35m (2.2ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-18 23:34:50 +0000
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (10.1ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 167ms (Views: 154.7ms | ActiveRecord: 0.2ms)
Started POST "/login" for 127.0.0.1 at 2017-02-18 23:34:51 +0000
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"email"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$bgRZs66OH.a1k.hv3/WD..j8yB.YzfRc5DKHWHr9CHnINdSW0hobi"], ["created_at", "2017-02-18 23:34:51.118501"], ["updated_at", "2017-02-18 23:34:51.118501"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$QWmCjGDEBrpbu5C43axGjuhqnRikMoGH5l/4BU.URyY4UcJ34UtdG"], ["created_at", "2017-02-18 23:34:51.127834"], ["updated_at", "2017-02-18 23:34:51.127834"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$dSKAhfGTHAAh9sSRdof9febEqMddoxXWBCeWPEBTggZW65asoQsxC"], ["created_at", "2017-02-18 23:34:51.140912"], ["updated_at", "2017-02-18 23:34:51.140912"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:34:51 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:34:51 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:34:51 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 4ms (ActiveRecord: 0.5ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:34:51 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integrate", "name"=>"Integration", "email"=>"integration@test.co.uk", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role_ids"=>"4"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (0.8ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 4ms (Views: 2.8ms | ActiveRecord: 0.3ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 23:34:59', '2017-02-18 23:34:59', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 23:34:59', '2017-02-18 23:34:59', 141249418)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-18 23:34:59', '2017-02-18 23:34:59', 995863769)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-18 23:34:59', '2017-02-18 23:34:59', 377866774)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:34:59', '2017-02-18 23:34:59', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:34:59', '2017-02-18 23:34:59', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:34:59', '2017-02-18 23:34:59', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:34:59', '2017-02-18 23:34:59', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 23:34:59', '2017-02-18 23:34:59', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 23:34:59', '2017-02-18 23:34:59', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:34:59', '2017-02-18 23:34:59', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:34:59', '2017-02-18 23:34:59', 298486374)[0m
  [1m[35m (2.0ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$IHRF9gYK4MK2X803vKl6sOjimgG.CQ0GJl4XTGrXs9oUcRJEiTnBa"], ["created_at", "2017-02-18 23:35:00.014596"], ["updated_at", "2017-02-18 23:35:00.014596"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$3BP5pf.yc1OGtjRwBtHQC.HjydlgGnUkHO5ey0a/uFXmvqeS74gVu"], ["created_at", "2017-02-18 23:35:00.042440"], ["updated_at", "2017-02-18 23:35:00.042440"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$sYoZtg.8SWaXBo9xmXrhaevbl7yCPNx9z6.0DWclHTiPVx6aucg/S"], ["created_at", "2017-02-18 23:35:00.075198"], ["updated_at", "2017-02-18 23:35:00.075198"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (7.8ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 173ms (Views: 168.6ms | ActiveRecord: 0.4ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-18 23:35:00 +0000
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 11ms (Views: 2.4ms | ActiveRecord: 0.3ms)
Started POST "/login" for 127.0.0.1 at 2017-02-18 23:35:00 +0000
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"email"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:35:00 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:35:00 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:35:00 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:35:00 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integrate", "name"=>"Integration", "email"=>"integration@test.co.uk", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role_ids"=>"4"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 23:35:16', '2017-02-18 23:35:16', 922721480)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 23:35:16', '2017-02-18 23:35:16', 141249418)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-18 23:35:16', '2017-02-18 23:35:16', 995863769)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-18 23:35:16', '2017-02-18 23:35:16', 377866774)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:35:16', '2017-02-18 23:35:16', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:35:16', '2017-02-18 23:35:16', 298486374)
  [1m[36mFixture Delete (1.8ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:35:16', '2017-02-18 23:35:16', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:35:16', '2017-02-18 23:35:16', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 23:35:16', '2017-02-18 23:35:16', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 23:35:16', '2017-02-18 23:35:16', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:35:16', '2017-02-18 23:35:16', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:35:16', '2017-02-18 23:35:16', 298486374)[0m
  [1m[35m (2.5ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (20.0ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 162ms (Views: 154.7ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$GCIsP2AXDSDzlNmORh100Op2O02VnDcqhahPJrjki3jbe45XSuPbW"], ["created_at", "2017-02-18 23:35:16.393427"], ["updated_at", "2017-02-18 23:35:16.393427"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$hANC3Me.nxgzEJSdwSAMiexkWbS1T54ZtUThkycAewPE17Gc0PnrK"], ["created_at", "2017-02-18 23:35:16.401588"], ["updated_at", "2017-02-18 23:35:16.401588"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$QPcnPi5gVhjImRbmpcAkcedcyVinW.VcQtO.gDCzO5cSouTcSujpq"], ["created_at", "2017-02-18 23:35:16.418539"], ["updated_at", "2017-02-18 23:35:16.418539"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (1.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-18 23:35:16 +0000
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 15ms (Views: 3.2ms | ActiveRecord: 0.2ms)
Started POST "/login" for 127.0.0.1 at 2017-02-18 23:35:16 +0000
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"email"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:35:16 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (10.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 13ms (ActiveRecord: 10.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:35:16 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (1.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 4ms (ActiveRecord: 1.8ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:35:16 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:35:16 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integrate", "name"=>"Integration", "email"=>"integration@test.co.uk", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role_ids"=>"4"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 23:35:56', '2017-02-18 23:35:56', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 23:35:56', '2017-02-18 23:35:56', 141249418)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-18 23:35:56', '2017-02-18 23:35:56', 995863769)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-18 23:35:56', '2017-02-18 23:35:56', 377866774)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:35:56', '2017-02-18 23:35:56', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:35:56', '2017-02-18 23:35:56', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:35:56', '2017-02-18 23:35:56', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:35:56', '2017-02-18 23:35:56', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 23:35:56', '2017-02-18 23:35:56', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 23:35:56', '2017-02-18 23:35:56', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:35:56', '2017-02-18 23:35:56', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:35:56', '2017-02-18 23:35:56', 298486374)[0m
  [1m[35m (1.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$0elnlEKrn1TupKSEMdWKeuoqdv7Ari/9HWZPplJbd9NGJSEB2qmiW"], ["created_at", "2017-02-18 23:35:56.824094"], ["updated_at", "2017-02-18 23:35:56.824094"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$OK1aTyxNl19CTPYdE1LDJOAoalPjyRtUp7mvOfNb8s/hzeet5vC2W"], ["created_at", "2017-02-18 23:35:56.850570"], ["updated_at", "2017-02-18 23:35:56.850570"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (4.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$zxDcRBi39ynym5TPiMBLReTtoZxOPQcWc7S1AOyLGBkcqClKnocoW"], ["created_at", "2017-02-18 23:35:56.877925"], ["updated_at", "2017-02-18 23:35:56.877925"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-18 23:35:57 +0000
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (7.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 152ms (Views: 144.2ms | ActiveRecord: 0.2ms)
Started POST "/sessions/new" for 127.0.0.1 at 2017-02-18 23:35:57 +0000
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (0.6ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 3ms (Views: 2.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:35:57 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:35:57 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:35:57 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:35:57 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integrate", "name"=>"Integration", "email"=>"integration@test.co.uk", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role_ids"=>"4"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 23:36:13', '2017-02-18 23:36:13', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 23:36:13', '2017-02-18 23:36:13', 141249418)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-18 23:36:13', '2017-02-18 23:36:13', 995863769)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-18 23:36:13', '2017-02-18 23:36:13', 377866774)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:36:13', '2017-02-18 23:36:13', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:36:13', '2017-02-18 23:36:13', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:36:13', '2017-02-18 23:36:13', 980190962)
  [1m[36mFixture Insert (0.8ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:36:13', '2017-02-18 23:36:13', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 23:36:13', '2017-02-18 23:36:13', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 23:36:13', '2017-02-18 23:36:13', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:36:13', '2017-02-18 23:36:13', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:36:13', '2017-02-18 23:36:13', 298486374)[0m
  [1m[35m (2.3ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$WRTCrfxqi80P6fT88jyRKe.zRHrgPUZSIflnxtcBsaeiyI3/Cf36a"], ["created_at", "2017-02-18 23:36:13.701006"], ["updated_at", "2017-02-18 23:36:13.701006"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$4Xq8P2oOKXosBqlLVLGhDuQE/AEwClpGQiu/zEOJODTU.wiIrewfi"], ["created_at", "2017-02-18 23:36:13.716204"], ["updated_at", "2017-02-18 23:36:13.716204"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$ytm2CdvCdYxYluIyUaa3gOn5PoLIzHspTE0dH7uEApDGXZoWS.h8W"], ["created_at", "2017-02-18 23:36:13.737151"], ["updated_at", "2017-02-18 23:36:13.737151"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-18 23:36:13 +0000
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (10.5ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 192ms (Views: 162.1ms | ActiveRecord: 0.2ms)
Started POST "/login" for 127.0.0.1 at 2017-02-18 23:36:13 +0000
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"email"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (0.6ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 3ms (Views: 2.2ms | ActiveRecord: 0.2ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:36:13 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:36:13 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:36:14 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:36:14 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integrate", "name"=>"Integration", "email"=>"integration@test.co.uk", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role_ids"=>"4"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 23:48:56', '2017-02-18 23:48:56', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 23:48:56', '2017-02-18 23:48:56', 141249418)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-18 23:48:56', '2017-02-18 23:48:56', 995863769)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-18 23:48:56', '2017-02-18 23:48:56', 377866774)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:48:56', '2017-02-18 23:48:56', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:48:56', '2017-02-18 23:48:56', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:48:56', '2017-02-18 23:48:56', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:48:56', '2017-02-18 23:48:56', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 23:48:56', '2017-02-18 23:48:56', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 23:48:56', '2017-02-18 23:48:56', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:48:56', '2017-02-18 23:48:56', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:48:56', '2017-02-18 23:48:56', 298486374)[0m
  [1m[35m (2.4ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (10.3ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 175ms (Views: 172.8ms | ActiveRecord: 0.4ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$v0dhgVGPe25okinWqC9B7.OedmI0jKUd/noB3waHFy.1S4Hck4TD6"], ["created_at", "2017-02-18 23:48:57.230090"], ["updated_at", "2017-02-18 23:48:57.230090"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$AgbCPmN2Hf.jOdvhstlKs.Vtws/z2y57002wM.WF3OjaijXQbBYSG"], ["created_at", "2017-02-18 23:48:57.248790"], ["updated_at", "2017-02-18 23:48:57.248790"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$L.YO.p.9qxiAHq3N6RnmZOttX8iApLfRVQ369kS2rm8lIZhHblCu2"], ["created_at", "2017-02-18 23:48:57.269769"], ["updated_at", "2017-02-18 23:48:57.269769"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:48:57 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 10ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:48:57 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:48:57 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:48:57 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integrate", "name"=>"Integration", "email"=>"integration@test.co.uk", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role_ids"=>"4"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-18 23:48:57 +0000
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 9ms (Views: 8.0ms | ActiveRecord: 0.2ms)
Started POST "/login" for 127.0.0.1 at 2017-02-18 23:48:57 +0000
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"username"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 23:49:32', '2017-02-18 23:49:32', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 23:49:32', '2017-02-18 23:49:32', 141249418)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-18 23:49:32', '2017-02-18 23:49:32', 995863769)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-18 23:49:32', '2017-02-18 23:49:32', 377866774)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:49:32', '2017-02-18 23:49:32', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:49:32', '2017-02-18 23:49:32', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:49:32', '2017-02-18 23:49:32', 980190962)
  [1m[36mFixture Insert (0.8ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:49:32', '2017-02-18 23:49:32', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 23:49:32', '2017-02-18 23:49:32', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 23:49:32', '2017-02-18 23:49:32', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:49:32', '2017-02-18 23:49:32', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:49:32', '2017-02-18 23:49:32', 298486374)[0m
  [1m[35m (2.3ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (20.9ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 182ms (Views: 178.1ms | ActiveRecord: 0.3ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:49:32 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 9ms (ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:49:32 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:49:32 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:49:32 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integrate", "name"=>"Integration", "email"=>"integration@test.co.uk", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role_ids"=>"4"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$PbaS/pKUe79P/P1Re.HwHeDLMQFmHE2aBops8oD2PX5qRoOULwlu."], ["created_at", "2017-02-18 23:49:32.925902"], ["updated_at", "2017-02-18 23:49:32.925902"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$0wrqvfuEj0tVjHFwwUs5W.FdhkZAH44s7pxt0Nty9HFyGvERKyInW"], ["created_at", "2017-02-18 23:49:32.939129"], ["updated_at", "2017-02-18 23:49:32.939129"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$9wv8wY4YYwzUjO2nEFcuHun0PUBlVFOK4gy4Ty5gVOWdSZi0V.9XC"], ["created_at", "2017-02-18 23:49:32.951365"], ["updated_at", "2017-02-18 23:49:32.951365"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-18 23:49:33 +0000
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (2.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 10ms (Views: 8.7ms | ActiveRecord: 0.1ms)
Started POST "/login" for 127.0.0.1 at 2017-02-18 23:49:33 +0000
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"email"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 23:49:43', '2017-02-18 23:49:43', 922721480)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 23:49:43', '2017-02-18 23:49:43', 141249418)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-18 23:49:43', '2017-02-18 23:49:43', 995863769)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-18 23:49:43', '2017-02-18 23:49:43', 377866774)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:49:43', '2017-02-18 23:49:43', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:49:43', '2017-02-18 23:49:43', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:49:43', '2017-02-18 23:49:43', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:49:43', '2017-02-18 23:49:43', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 23:49:43', '2017-02-18 23:49:43', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 23:49:43', '2017-02-18 23:49:43', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:49:43', '2017-02-18 23:49:43', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:49:43', '2017-02-18 23:49:43', 298486374)[0m
  [1m[35m (2.2ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$PnjsobvWqw547l3SW18Nsu8FIm1.gYoXUY3bo0HJidnu6chPd24qW"], ["created_at", "2017-02-18 23:49:43.129887"], ["updated_at", "2017-02-18 23:49:43.129887"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$CmYHm0mz48hHHKBDN1w3X.rTXkq4PFyh5.aTHpimMXd93eFxLpcq."], ["created_at", "2017-02-18 23:49:43.137155"], ["updated_at", "2017-02-18 23:49:43.137155"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$Cbl/BzmMewbENcNfHMIWuu6v8krdEtSVM11Z9qpFGOk8szZ4shrpC"], ["created_at", "2017-02-18 23:49:43.144451"], ["updated_at", "2017-02-18 23:49:43.144451"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-18 23:49:43 +0000
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (9.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 147ms (Views: 137.3ms | ActiveRecord: 0.2ms)
Started POST "/login" for 127.0.0.1 at 2017-02-18 23:49:43 +0000
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"username"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:49:43 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:49:43 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:49:43 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:49:43 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integrate", "name"=>"Integration", "email"=>"integration@test.co.uk", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role_ids"=>"4"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (0.7ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 3ms (Views: 2.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 23:50:19', '2017-02-18 23:50:19', 922721480)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 23:50:19', '2017-02-18 23:50:19', 141249418)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-18 23:50:19', '2017-02-18 23:50:19', 995863769)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-18 23:50:19', '2017-02-18 23:50:19', 377866774)[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:50:19', '2017-02-18 23:50:19', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:50:19', '2017-02-18 23:50:19', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:50:19', '2017-02-18 23:50:19', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:50:19', '2017-02-18 23:50:19', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 23:50:19', '2017-02-18 23:50:19', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 23:50:19', '2017-02-18 23:50:19', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:50:19', '2017-02-18 23:50:19', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:50:19', '2017-02-18 23:50:19', 298486374)[0m
  [1m[35m (2.3ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (1.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (11.8ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 178ms (Views: 176.9ms | ActiveRecord: 0.3ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:50:19 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 8ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:50:19 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:50:19 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:50:19 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integrate", "email"=>"integration@test.co.uk", "name"=>"Integration", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role_ids"=>"4"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$D/mC.XcS.BqEEJdhah7SO.q3pH74ngDvDFmnWOguVBVhK6Ysq34D."], ["created_at", "2017-02-18 23:50:19.363815"], ["updated_at", "2017-02-18 23:50:19.363815"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$sNv5jcFRpzfpKwZVRJy8v.adIJWwiy9wlIOEwSEbjPDfxq0ssOOaO"], ["created_at", "2017-02-18 23:50:19.369861"], ["updated_at", "2017-02-18 23:50:19.369861"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$MUAugJDTFUaz4S65600syOaHFXos3wfAjNtoqI8RRPuPiXfRlYTla"], ["created_at", "2017-02-18 23:50:19.387670"], ["updated_at", "2017-02-18 23:50:19.387670"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-18 23:50:19 +0000
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (8.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 14ms (Views: 12.6ms | ActiveRecord: 0.2ms)
Started POST "/login" for 127.0.0.1 at 2017-02-18 23:50:19 +0000
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"username"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 23:51:12', '2017-02-18 23:51:12', 922721480)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 23:51:12', '2017-02-18 23:51:12', 141249418)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-18 23:51:12', '2017-02-18 23:51:12', 995863769)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-18 23:51:12', '2017-02-18 23:51:12', 377866774)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:51:12', '2017-02-18 23:51:12', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:51:12', '2017-02-18 23:51:12', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:51:12', '2017-02-18 23:51:12', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:51:12', '2017-02-18 23:51:12', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 23:51:12', '2017-02-18 23:51:12', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 23:51:12', '2017-02-18 23:51:12', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:51:12', '2017-02-18 23:51:12', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:51:12', '2017-02-18 23:51:12', 298486374)[0m
  [1m[35m (2.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (1.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$FBsmoZBdnHiHVAWNOClInuoaaS2LVJuvYzqo4JyJG99GaJKGVBgiC"], ["created_at", "2017-02-18 23:51:12.514794"], ["updated_at", "2017-02-18 23:51:12.514794"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$LBs2v4chVej/ZCs53UlsMO2WairIz8L2z6X2gpN4E68vDRxBBTiYK"], ["created_at", "2017-02-18 23:51:12.543996"], ["updated_at", "2017-02-18 23:51:12.543996"]]
  [1m[35m (3.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$uw/49.gEMkvBeBbcpS0vKeHjQAA5gMN83t/Di9ipx3/vxXmZjqvBG"], ["created_at", "2017-02-18 23:51:12.570427"], ["updated_at", "2017-02-18 23:51:12.570427"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (7.6ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 166ms (Views: 163.9ms | ActiveRecord: 0.4ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-18 23:51:12 +0000
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (0.7ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 11ms (Views: 2.5ms | ActiveRecord: 0.2ms)
Started POST "/login" for 127.0.0.1 at 2017-02-18 23:51:12 +0000
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"username"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:51:12 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:51:12 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started GET "/login" for 127.0.0.1 at 2017-02-18 23:51:12 +0000
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (0.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 6ms (Views: 5.5ms | ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:51:12 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:51:12 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integrate", "email"=>"integration@test.co.uk", "name"=>"Integration", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role_ids"=>"4"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-18 23:51:59', '2017-02-18 23:51:59', 922721480)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-18 23:51:59', '2017-02-18 23:51:59', 141249418)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-18 23:51:59', '2017-02-18 23:51:59', 995863769)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-18 23:51:59', '2017-02-18 23:51:59', 377866774)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:51:59', '2017-02-18 23:51:59', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 23:51:59', '2017-02-18 23:51:59', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:51:59', '2017-02-18 23:51:59', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-18 23:51:59', '2017-02-18 23:51:59', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-18 23:51:59', '2017-02-18 23:51:59', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-18 23:51:59', '2017-02-18 23:51:59', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:51:59', '2017-02-18 23:51:59', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-18 23:51:59', '2017-02-18 23:51:59', 298486374)[0m
  [1m[35m (2.2ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:51:59 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 10ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:51:59 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 3ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-18 23:51:59 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-18 23:51:59 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integrate", "email"=>"integration@test.co.uk", "name"=>"Integration", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role_ids"=>"4"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$NLlXnIrTzg/5aJ4ylQ.LPeHoI7BhLN46sg.3oW1pHGarpKq3Bwvsi"], ["created_at", "2017-02-18 23:51:59.780838"], ["updated_at", "2017-02-18 23:51:59.780838"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$6atEIbnAu/w1O8XWnZzureMmczqfw9MvaIq0g/rPsbqweMb3vEvWa"], ["created_at", "2017-02-18 23:51:59.846418"], ["updated_at", "2017-02-18 23:51:59.846418"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$IkwT6wwLj4k/ThKMtW6dPul5iLz0qw98Pi7NChq8lgemjMMEOninO"], ["created_at", "2017-02-18 23:51:59.885992"], ["updated_at", "2017-02-18 23:51:59.885992"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-18 23:51:59 +0000
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (23.9ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 187ms (Views: 184.8ms | ActiveRecord: 0.3ms)
Started POST "/login" for 127.0.0.1 at 2017-02-18 23:52:00 +0000
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"username"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (0.7ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 3ms (Views: 2.1ms | ActiveRecord: 0.2ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-19 00:11:28', '2017-02-19 00:11:28', 922721480)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-19 00:11:28', '2017-02-19 00:11:28', 141249418)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-19 00:11:28', '2017-02-19 00:11:28', 995863769)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-19 00:11:28', '2017-02-19 00:11:28', 377866774)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-19 00:11:28', '2017-02-19 00:11:28', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-19 00:11:28', '2017-02-19 00:11:28', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-19 00:11:28', '2017-02-19 00:11:28', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-19 00:11:28', '2017-02-19 00:11:28', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-19 00:11:28', '2017-02-19 00:11:28', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-19 00:11:28', '2017-02-19 00:11:28', 298486374)
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-19 00:11:28', '2017-02-19 00:11:28', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-19 00:11:28', '2017-02-19 00:11:28', 298486374)[0m
  [1m[35m (2.1ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (13.6ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 188ms (Views: 178.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-19 00:11:28 +0000
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (0.6ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 9ms (Views: 2.1ms | ActiveRecord: 0.1ms)
Started POST "/login" for 127.0.0.1 at 2017-02-19 00:11:28 +0000
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"username"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-19 00:11:28 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-19 00:11:28 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-19 00:11:28 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-19 00:11:28 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integrate", "email"=>"integration@test.co.uk", "name"=>"Integration", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role_ids"=>"4"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$R2ITxusTLWNeRZFA7LvQLOw5vRUPyKwJAGaLmm51RWHgkQifOpGEm"], ["created_at", "2017-02-19 00:11:28.635647"], ["updated_at", "2017-02-19 00:11:28.635647"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$D1aRwzH54KBdc2B4Mgllw.GELRZjpTpT8t5518iYtLfijJh6ykXqq"], ["created_at", "2017-02-19 00:11:28.643311"], ["updated_at", "2017-02-19 00:11:28.643311"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$obdvhaCRwd6EU899Ud.nw.TiNBypbOk7N6CYgv4LGm6eTs43Lhwhi"], ["created_at", "2017-02-19 00:11:28.655178"], ["updated_at", "2017-02-19 00:11:28.655178"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-19 00:11:56', '2017-02-19 00:11:56', 922721480)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-19 00:11:56', '2017-02-19 00:11:56', 141249418)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-19 00:11:56', '2017-02-19 00:11:56', 995863769)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-19 00:11:56', '2017-02-19 00:11:56', 377866774)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-19 00:11:56', '2017-02-19 00:11:56', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-19 00:11:56', '2017-02-19 00:11:56', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-19 00:11:56', '2017-02-19 00:11:56', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-19 00:11:56', '2017-02-19 00:11:56', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-19 00:11:56', '2017-02-19 00:11:56', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-19 00:11:56', '2017-02-19 00:11:56', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-19 00:11:56', '2017-02-19 00:11:56', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-19 00:11:56', '2017-02-19 00:11:56', 298486374)[0m
  [1m[35m (2.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UsersLoginTest: test_login_with_invalid_info
--------------------------------------------
Started GET "/login" for 127.0.0.1 at 2017-02-19 00:11:56 +0000
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (11.2ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 184ms (Views: 162.0ms | ActiveRecord: 0.3ms)
Started POST "/login" for 127.0.0.1 at 2017-02-19 00:11:57 +0000
Processing by SessionsController#create as HTML
  Parameters: {"params"=>{"session"=>{"username"=>"", "password"=>"[FILTERED]"}}}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$6xIyA5Jsvjh40LFjPR7XXehZ7aStgxxVPtvfPa4imVe8EGOD31DJO"], ["created_at", "2017-02-19 00:11:57.100770"], ["updated_at", "2017-02-19 00:11:57.100770"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$5Yjbqsvc5Hz2jHbtTv4yme4Ft4TSrTkO4pu95VjLd.7nO92l.Hlzu"], ["created_at", "2017-02-19 00:11:57.120147"], ["updated_at", "2017-02-19 00:11:57.120147"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$nk7X45wQjiMHxHfz1wVXnO/ofxrVrEF6dh66OWhr20xaCOVR8SOGS"], ["created_at", "2017-02-19 00:11:57.126444"], ["updated_at", "2017-02-19 00:11:57.126444"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (0.6ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 3ms (Views: 2.7ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-19 00:12:15', '2017-02-19 00:12:15', 922721480)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-19 00:12:15', '2017-02-19 00:12:15', 141249418)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-19 00:12:15', '2017-02-19 00:12:15', 995863769)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-19 00:12:15', '2017-02-19 00:12:15', 377866774)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-19 00:12:15', '2017-02-19 00:12:15', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-19 00:12:15', '2017-02-19 00:12:15', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-19 00:12:15', '2017-02-19 00:12:15', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-19 00:12:15', '2017-02-19 00:12:15', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-19 00:12:15', '2017-02-19 00:12:15', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-19 00:12:15', '2017-02-19 00:12:15', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-19 00:12:15', '2017-02-19 00:12:15', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-19 00:12:15', '2017-02-19 00:12:15', 298486374)[0m
  [1m[35m (2.0ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (21.4ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 175ms (Views: 170.2ms | ActiveRecord: 0.3ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$igY6GLKWlYlUlNaWSsf/aOZC4menXKDo6yfzj8O6yBxqr2LkNTWwS"], ["created_at", "2017-02-19 00:12:15.658543"], ["updated_at", "2017-02-19 00:12:15.658543"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (1.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$4hnVMI0TaGI2bMfP7/N2K.HLSSDL5zQPlgTtQTiB0Aq5xTNeOJCe6"], ["created_at", "2017-02-19 00:12:15.667902"], ["updated_at", "2017-02-19 00:12:15.667902"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$oH31u8isMBszwhy0P7vt7O5wewrgg8oJA8UtZFQud7NAi.5jKIpuK"], ["created_at", "2017-02-19 00:12:15.681828"], ["updated_at", "2017-02-19 00:12:15.681828"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-20 10:17:19', '2017-02-20 10:17:19', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-20 10:17:19', '2017-02-20 10:17:19', 141249418)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-20 10:17:19', '2017-02-20 10:17:19', 995863769)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-20 10:17:19', '2017-02-20 10:17:19', 377866774)[0m
  [1m[35mFixture Delete (1.1ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-20 10:17:19', '2017-02-20 10:17:19', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-20 10:17:19', '2017-02-20 10:17:19', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-20 10:17:19', '2017-02-20 10:17:19', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-20 10:17:19', '2017-02-20 10:17:19', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-20 10:17:19', '2017-02-20 10:17:19', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-20 10:17:19', '2017-02-20 10:17:19', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-20 10:17:19', '2017-02-20 10:17:19', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-20 10:17:19', '2017-02-20 10:17:19', 298486374)[0m
  [1m[35m (8.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$MOxhwc80LgeWpDNvc5RzYuGUaPmzbgs4uwZHYgZi/4iX1uFZX/5ri"], ["created_at", "2017-02-20 10:17:19.764949"], ["updated_at", "2017-02-20 10:17:19.764949"]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$k97eGIhdZYVc9In5dRn0CO3A9gyNqdoxvP4rxFW5O5HkRlkzHOu0K"], ["created_at", "2017-02-20 10:17:19.780790"], ["updated_at", "2017-02-20 10:17:19.780790"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$Pfkk7eta/NEwe.XerCF9tu1ROoLk7zivKPvd.u.KkvXtk2zYioE7e"], ["created_at", "2017-02-20 10:17:19.789865"], ["updated_at", "2017-02-20 10:17:19.789865"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (7.9ms)
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 180ms (Views: 178.7ms | ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-20 10:18:11', '2017-02-20 10:18:11', 922721480)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-20 10:18:11', '2017-02-20 10:18:11', 141249418)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-20 10:18:11', '2017-02-20 10:18:11', 995863769)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-20 10:18:11', '2017-02-20 10:18:11', 377866774)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-20 10:18:11', '2017-02-20 10:18:11', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-20 10:18:11', '2017-02-20 10:18:11', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-20 10:18:11', '2017-02-20 10:18:11', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-20 10:18:11', '2017-02-20 10:18:11', 298486374)[0m
  [1m[35mFixture Delete (0.1ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-20 10:18:11', '2017-02-20 10:18:11', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-20 10:18:11', '2017-02-20 10:18:11', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-20 10:18:11', '2017-02-20 10:18:11', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-20 10:18:11', '2017-02-20 10:18:11', 298486374)[0m
  [1m[35m (2.8ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$JNgtSBiyuuu6skruVlIlNuKjrv.heFs0ubHX0bAyK.a.QWC1nG9cS"], ["created_at", "2017-02-20 10:18:11.091489"], ["updated_at", "2017-02-20 10:18:11.091489"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$wY8PUuNkqLTxAm/q8/NJe.E7jd2jCLgZBXP.U02L8MPRR26eSVcIq"], ["created_at", "2017-02-20 10:18:11.095600"], ["updated_at", "2017-02-20 10:18:11.095600"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$gKD2voCLEu20gznUl6Zh5emC4MBibXwNobUxnRqdaS/vWXXShtnmy"], ["created_at", "2017-02-20 10:18:11.112090"], ["updated_at", "2017-02-20 10:18:11.112090"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (6.7ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 186ms (Views: 184.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UsersNewUserTest: test_invalid_user_information
-----------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-20 10:18:11 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 9ms (ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-20 10:18:11 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"", "name"=>"", "email"=>"invalid", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
UsersNewUserTest: test_valid_user_information
---------------------------------------------
Started GET "/users/new" for 127.0.0.1 at 2017-02-20 10:18:11 +0000
Processing by UsersController#new as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.3ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
Started POST "/users" for 127.0.0.1 at 2017-02-20 10:18:11 +0000
Processing by UsersController#create as HTML
  Parameters: {"params"=>{"user"=>{"username"=>"integrate", "email"=>"integration@test.co.uk", "name"=>"Integration", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "role_ids"=>"4"}}}
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
Redirected to http://www.example.com/login
Filter chain halted as :logged_in_user rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "users"[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mFixture Delete (0.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('adminuser', 'adminemail@test.com', 'Mr Admin User', '2017-02-20 10:19:47', '2017-02-20 10:19:47', 922721480)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "created_at", "updated_at", "id") VALUES ('teachuser', 'teacheremail@test.com', 'Mrs Teacher User', '2017-02-20 10:19:47', '2017-02-20 10:19:47', 141249418)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('parentuser', 'parentemail@test.com', 'Mr Parent User', 'password', '2017-02-20 10:19:47', '2017-02-20 10:19:47', 995863769)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at", "id") VALUES ('studuser', 'studentemail@test.com', 'Miss Student User', 'password', '2017-02-20 10:19:47', '2017-02-20 10:19:47', 377866774)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "roles"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-20 10:19:47', '2017-02-20 10:19:47', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "roles" ("name", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-20 10:19:47', '2017-02-20 10:19:47', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "assignments"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-20 10:19:47', '2017-02-20 10:19:47', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "assignments" ("user_id", "role_id", "created_at", "updated_at", "id") VALUES (NULL, NULL, '2017-02-20 10:19:47', '2017-02-20 10:19:47', 298486374)[0m
  [1m[35mFixture Delete (0.0ms)[0m  DELETE FROM "lessons"
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 1, '2017-02-20 10:19:47', '2017-02-20 10:19:47', 980190962)[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "lessons" ("name", "date", "subject_id", "created_at", "updated_at", "id") VALUES ('MyString', '2017-02-18 12:53:02.152957', 2, '2017-02-20 10:19:47', '2017-02-20 10:19:47', 298486374)
  [1m[36mFixture Delete (0.0ms)[0m  [1mDELETE FROM "subjects"[0m
  [1m[35mFixture Insert (0.0ms)[0m  INSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-20 10:19:47', '2017-02-20 10:19:47', 980190962)
  [1m[36mFixture Insert (0.0ms)[0m  [1mINSERT INTO "subjects" ("name", "classGroup", "teacher_id", "created_at", "updated_at", "id") VALUES ('MyString', 'MyString', 22, '2017-02-20 10:19:47', '2017-02-20 10:19:47', 298486374)[0m
  [1m[35m (3.0ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserTest: test_email_should_be_present
--------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-------------------------------------------
UserTest: test_password_should_not_be_blank
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------
UserTest: test_name_should_be_present
-------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------
UserTest: test_username_should_be_present
-----------------------------------------
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = ' ' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
UserTest: test_name_should_not_be_too_long
------------------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------
UserTest: test_username_should_not_be_too_long
----------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'xxxxxxxxxxx' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------
UserTest: test_user_should_be_valid
-----------------------------------
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------
UserTest: test_usernames_should_be_saved_as_lowercase
-----------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'tEsTNaMe' LIMIT 1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "testname"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$qcu9NgSA9ldNFFlXYy5bOeFjaJGdqMyfHoF95rIXCSj28XAX4Bpii"], ["created_at", "2017-02-20 10:19:47.774831"], ["updated_at", "2017-02-20 10:19:47.774831"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 995863770]]
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------
UserTest: test_password_should_not_be_too_short
-----------------------------------------------
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-------------------------------------------
UserTest: test_email_should_not_be_too_long
-------------------------------------------
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------
UserTest: test_emails_should_be_saved_as_lowercase
--------------------------------------------------
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("email", "username", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["email", "test@test.com"], ["username", "test_user"], ["name", "Test User Name"], ["password_digest", "$2a$04$am878PsDkOYIUDJJYgOSWOpWKzJKdewUkUcBgKrMk9df3wfHKhte6"], ["created_at", "2017-02-20 10:19:47.795509"], ["updated_at", "2017-02-20 10:19:47.795509"]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863770]]
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------
UserTest: test_username_should_be_unique
----------------------------------------
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "users" ("username", "email", "name", "password_digest", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["username", "test_user"], ["email", "example@example.com"], ["name", "Test User Name"], ["password_digest", "$2a$04$qvChqbOwFPtKCO7XAzUOnuBSNxSdxig1BmJSKWi8nRP72xnODz/Re"], ["created_at", "2017-02-20 10:19:47.802905"], ["updated_at", "2017-02-20 10:19:47.802905"]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."username" = 'test_user' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
---------------------------------------------
SubjectsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SubjectsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
SubjectsControllerTest: test_should_get_show
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
SessionsControllerTest: test_should_get_new
-------------------------------------------
Processing by SessionsController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1
  Rendered sessions/new.html.erb within layouts/application (6.6ms)
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
Completed 200 OK in 181ms (Views: 179.5ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_show
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------
LessonsControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------
LessonsControllerTest: test_should_get_new
------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-------------------------------------------
LessonsControllerTest: test_should_get_edit
-------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------
UsersControllerTest: test_should_get_new
----------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 922721480]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 141249418]]
  [1m[35mUser Load (0.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 995863769]]
  [1m[36mUser Load (0.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1[0m  [["id", 377866774]]
  [1m[35m (0.0ms)[0m  rollback transaction
